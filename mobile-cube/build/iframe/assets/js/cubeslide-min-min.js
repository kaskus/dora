!function(_){function x(e,t,n){var i="";return e[1]&&(i+='<a href="'+e[1]+'" target="'+n.linktarget+'">'),i+='<img src="'+e[0]+'"/>',e[1]&&(i+="</a>"),i+=t?"<br/>"+t:""}function k(e,t,n,i){return"rotateY("+e+"deg) translate3D("+t+"px,"+n+"px,"+i+"px)"}var q={slideshowmarkup:'<div><div class="side1"></div><div class="side2"></div></div></div>',pause:0,fxduration:1e3,desc:[],swipethreshold:[50,300],linktarget:"_new"},D=void 0!==_(document.documentElement).css("perspective");window.cubeslide=function(e){var r=this,o=_.extend({},q,e),i=0,a=!1,t=[],d=0,n=null,u=o.images.length,c=_("#"+o.id);o.dimensions&&o.dimensions[0]&&c.css({width:o.dimensions[0],height:o.dimensions[1]});var s=c.width();c.html(o.slideshowmarkup);var f="mousemove.dragstart"+o.id+" touchmove.dragstart"+o.id,l="mouseup.dragend"+o.id+" touchend.dragend"+o.id,h,m,v=c.find("> div").css({transformStyle:"preserve-3d"}).find("> div"),g=null,p=null,w=D?o.pause+o.fxduration:o.pause,b={frontpanel:"rotateY(0deg) translate3D(0, 0, 0)",leftpanel:k(-90,-s/2,0,s/2),rightpanel:k(90,s/2,0,s/2),front_to_right:k(90,s/2,0,s/2),front_to_left:k(-90,-s/2,0,s/2),to_front:"rotateY(0deg) translate3D(0, 0, 0)"};c.data("info",{frontside:0,otherside:1,width:s,$sides:v}),v.eq(0).html(x(o.images[0],o.desc[0],o)).css({transform:b.frontpanel}).end().eq(1).css({visibility:"hidden"}),this.rotatecube=function(e,t){if(!D||!a){a=!0,void 0===t&&clearInterval(p);var e,n="left"==(e="back"==e?"right":"forward"==e?"left":e)?d<u-1?d+1:0:0==d?u-1:d-1;if(D){var i=c.data("info"),r=i.frontside,s=i.otherside;i.$sides.css({transitionDuration:"0s"}).eq(i.otherside).html(x(o.images[n],o.desc[n],o)).css({visibility:"visible",transform:"right"==e?b.leftpanel:b.rightpanel}),d=n,clearTimeout(g),g=setTimeout(function(){i.$sides.css({transitionDuration:o.fxduration+"ms"}).eq(r).css({transform:"right"==e?b.front_to_right:b.front_to_left}).end().eq(s).css({transform:b.to_front})},50)}else v.eq(0).html(x(o.images[n],o.desc[n],o)),d=n}};for(var y=0;y<o.images.length;y++)t[y]=new Image,t[y].src=o.images[y][0];0<o.pause&&(p=setInterval(function(){r.rotatecube("forward",!0)},w),c.on("mouseenter",function(){clearInterval(p)}),c.on("mouseleave",function(){clearInterval(p),p=setInterval(function(){r.rotatecube("forward",!0)},w)})),c.on("mousedown touchstart",function(e){var e,t=(e=-1!=e.type.indexOf("touch")?e.originalEvent.changedTouches[0]:e).pageX,i=(new Date).getTime();if(h=0,_(document).on(f,function(e){var e="-1"!=e.type.indexOf("touch")?e.originalEvent.changedTouches[0]:e;return h=e.pageX-t,!1}),_(document).on(l,function(e){var e=-1!=e.type.indexOf("touch")?e.originalEvent.changedTouches[0]:e;_(document).unbind(f),_(document).unbind(l);var t=(new Date).getTime()-i;if(Math.abs(h)>o.swipethreshold[0]&&t<o.swipethreshold[1]){var n=h<0?"forward":"back";r.rotatecube(n)}if("mouseup"==e.type)return!1}),"mousedown"==e.type)return!1}),c.on("click",function(e){if(0<Math.abs(h)&&"IMG"==e.target.tagName)return!1}),D&&v.on("transitionend webkitTransitionEnd",function(e){var t=_(e.target);if(/transform/i.test(e.originalEvent.propertyName)&&2==++i){var n=c.data("info");n.otherside=n.frontside,n.frontside=0==n.otherside?1:0,v.css({transitionDuration:"0s",transform:"none"}).eq(n.frontside).css({transform:b.frontpanel}).end().eq(n.otherside).css({visibility:"hidden"}),i=0,a=!1}})}}(jQuery);