// FRONT END
/*
   Function to insert BBCode, it receives 3 parameter. The openWith and closeWith parameters are used to wrap the text with the BBCode tag. The textbox parameter defines which textbox element should be used.
 */
function insertBBCode(e,t,s){var a=document.querySelector(s),o=$(s),r=a.selectionStart,i=a.selectionEnd,n=o.val(),c=n.substring(r,i),l=e,d=t;o.val(n.substring(0,r)+l+c+d+n.substring(i)),a.focus(),a.selectionStart=r+l.length+c.length+d.length,a.selectionEnd=r+l.length+c.length+d.length}
/*
  Function to detect height of element changed  
 */function onElementHeightChange(t,s){var a=t.clientHeight,o;!function e(){o=t.clientHeight,a!=o&&s(),a=o,t.onElementHeightChangeTimer&&clearTimeout(t.onElementHeightChangeTimer),t.onElementHeightChangeTimer=setTimeout(e,200)}()}
/**
 * function to open navigation bar
 */function toggleNavBar(){$("#jsNavBar").toggleClass("is-open"),$(document.body).toggleClass("o-hidden")}
/**
 * function to open view profile picture overlay
 */function toggleViewPP(){$("#viewProfilePicture").toggleClass("is-open"),$(document.body).toggleClass("o-hidden")}
/**
 * function to open change profile picture overlay
 */function toggleChangePP(){$("#changeProfilePicture").toggleClass("is-open"),$(document.body).removeClass("o-hidden")}
/**
 * function to open change Cover overlay
 */function toggleChangeCover(){$("#changeCoverPicture").toggleClass("is-open"),$(document.body).removeClass("o-hidden")}
/**
 * function to open profile menu overlay
 */function toggleProfile(){$("#jsProfile").toggleClass("is-open"),$(document.body).toggleClass("o-hidden")}
/**
 * function to open notification menu overlay
 */function toggleNotification(){$("#jsNotification").toggleClass("is-open"),$(document.body).toggleClass("o-hidden")}
/**
 * function to open category overlay
 */function toggleCategory(){$("#jsCategory").toggleClass("is-open"),$(document.body).toggleClass("o-hidden"),catLoad||fetchCategories()}
/**
 * function to open create thread overlay
 */function toggleCreate(){$("#jsCreatePost").toggleClass("is-open"),$(document.body).toggleClass("o-hidden")}function toggleSortThread(){$("#jsThreadSort").toggleClass("is-open"),$(document.body).toggleClass("o-hidden")}
/**
 * function to open share thread
 */function showShare(){$(".jsShareThread").toggleClass("is-open"),$(".jsShareThread").next().toggleClass("is-open")}
/**
 * function to open login and resized captcha
 */
function toggleLogin(){$("#jsLogin").toggleClass("is-open"),$(document.body).toggleClass("o-hidden"),$("#username").focus(),0==resized&&(resizeCaptcha(),resized=!0)}
/**
 * function to resize captcha
 */function resizeCaptcha(){
// RESPONSIVE CAPTCHA WHEN SCREEN < 302
var e=$(".g-recaptcha").parent().width();if(e<302){var t=e/302;$(".g-recaptcha").css("transform","scale("+t+")"),$(".g-recaptcha").css("-webkit-transform","scale("+t+")"),$(".g-recaptcha").css("transform-origin","0 0"),$(".g-recaptcha").css("-webkit-transform-origin","0 0")}}
// function setNightIcon() {
//     if($('body').hasClass('night')){
//         var isNight = true;
//     }
//     else{
//         var isNight = false;
//     }
//     $( ".jsIconChannel" ).each(function( index ) {
//         var pathImg = $(this).attr('src');
//         if(isNight){
//             pathImg = pathImg.slice(0, -4);
//             pathImg = pathImg + "-white.svg";
//         }
//         else{
//             pathImg = pathImg.slice(0, -10);
//             pathImg = pathImg + ".svg";
//         }
//         $(this).attr('src', pathImg);
//     });
//     $( ".jsIconMenu" ).each(function( index ) {
//         var pathImg = $(this).attr('src');
//         if(isNight){
//             pathImg = pathImg.slice(0, -4);
//             pathImg = pathImg + "-orange.svg";
//         }
//         else{
//             // pathImg = pathImg.slice(0, -11);
//             // pathImg = pathImg + ".svg";
//         }
//         $(this).attr('src', pathImg);
//     });
// }
/**
 * function to open share more on landing
 */function jsmoreShare(e){toShow=!0,"block"==$(e).parent().next().css("display")&&(toShow=!1),$.each($(".jsShowShare"),function(e,t){"block"==$(t).parent().next().css("display")&&($(t).parent().next().hide(),$(t).addClass("hide").removeClass("show"))}),toShow&&($(e).parent().next().show(),$(e).addClass("show").removeClass("hide"))}
/**
 * function to open more menus ...
 */function jsMoreMenus(e){toShow=!0,"block"==$(e).parent().next().css("display")&&(toShow=!1),$.each($(".jsShowMenus"),function(e,t){"block"==$(t).parent().next().css("display")&&($(t).parent().next().hide(),$(t).parent().next().find(".toggleMenu").removeClass("is-visible"),$(t).addClass("hide").removeClass("show"))}),toShow&&($(e).parent().next().show(),$(e).parent().next().find(".toggleMenu").addClass("is-visible"),$(e).addClass("show").removeClass("hide"))}
/**
 * bind spoiler
 */
// END
/**
 * bind uploadProfilePicture
 */
function uploadAvatar(){function e(o){if(o.files&&o.files[0]){var r=new FileReader;r.onload=function(e){var t=o.files[0].name.split(".").pop().toLowerCase(),s;if(-1<n.indexOf(t))openModal("changeProfilePicture"),setTimeout(function(){i.croppie("bind",{url:e.target.result})},400);else{c=o.files[0],$("#jsImageAvatar").attr("src",r.result),$("#jsImageAvatarView").attr("src",r.result);var a=new FormData;a.append("userpicture",c),$.ajax({url:"/user/profile_picture",type:"POST",data:a,processData:!1,contentType:!1,dataType:"json",success:function(e,t){"ok"==e.status?$.ajax({url:"/user/update_avatar",type:"post",data:{userimgtime:e.userimgtime,userimgrev:e.userimgrev,imgurl:e.url},success:function(e){$("#remove_avatar").show()}}):alert(e.error)}})}},r.readAsDataURL(o.files[0])}else console.log("Sorry - your browser doesn't support the FileReader API")}var i,n=["jpg","png","jpeg"],c;i=$("#jsUploadAvatarCropper").croppie({viewport:{width:150,height:150,type:"circle"}}),$("#jsUploadAvatar").on("change",function(){e(this)}),$("#jsButtonCropAvatar").on("click",function(e){i.croppie("result",{type:"base64",size:{width:400,height:400}}).then(function(e){$("#jsImageAvatar").attr("src",e),$("#jsImageAvatarView").attr("src",e);var t=dataURLtoFile(e,"myavatar.jpg"),s=new FormData;s.append("userpicture",t),$.ajax({url:"/user/profile_picture",type:"POST",data:s,processData:!1,contentType:!1,dataType:"json",success:function(e,t){"ok"==e.status?$.ajax({url:"/user/update_avatar",type:"post",data:{userimgtime:e.userimgtime,userimgrev:e.userimgrev,imgurl:e.url},success:function(e){$("#remove_avatar").show(),toggleChangePP()}}):alert(e.error)}})})})}function uploadCover(){function e(a){if(a.files&&a.files[0]){var e=new FileReader;e.onload=function(e){var t=a.files[0].name.split(".").pop().toLowerCase(),s;-1<r.indexOf(t)?(openModal("changeCoverPicture"),setTimeout(function(){o.croppie("bind",{url:e.target.result})},400)):alert("Unsupported image format")},e.readAsDataURL(a.files[0])}else console.log("Sorry - your browser doesn't support the FileReader API")}var t=$("#jsImageCover").width()-32,s=t/6,o,r=["jpg","png","jpeg"],a,i=$("#jsImageCover").attr("src");o=$("#jsUploadCoverCropper").croppie({viewport:{width:t,height:s}}),$("#jsUploadCover").on("change",function(){e(this)}),$("#jsButtonCropCover").on("click",function(e){o.croppie("result",{type:"base64",size:{width:970,height:160}}).then(function(e){$("#jsImageCover").attr("src",e);var t=dataURLtoFile(e,"mycover.jpg"),s=new FormData;s.append("userpicture",t),$.ajax({url:"/user/coverimage",type:"POST",data:s,processData:!1,contentType:!1,dataType:"json",success:function(e,t){"ok"==e.status?$.ajax({url:"/user/update_cover_image",type:"post",data:{userimgtime:e.userimgtime,imgurl:e.url,oldimgurl:i,action:"upload"},success:function(e){toggleChangeCover(),$("#remove_cover").show()}}):alert(e.error)}})})})}function openModal(e){var t;$(".jsModal").removeClass("is-open"),$("#"+e).addClass("is-open")}
// DOCUMENT READY
/**
 *bind click notice
*/
function showNotice(e,t){void 0===t&&(t=3e3),document.notice_tid&&clearTimeout(document.notice_tid),$(".jsNoticeText").html(e),$(".jsNoticeWrap").show(),document.notice_tid=setTimeout(function(){$(".jsNoticeWrap").fadeOut()},t)}
/**
 * function to adjust text area
 */function textAreaAdjust(e){e.style.height="1px",e.style.height=e.scrollHeight-25+"px"}
/**
 * function to adjust larger text area
 */function largeTextAreaAdjust(e){e.style.height="15px",e.style.height=e.scrollHeight+5+"px"}
/**
 * function to open rating
 */function openRating(){$(".jsRating").show(),$(".jsOverlay").show(),
// $(".jsIconMovement").addClass("turnIcon");
$(document.body).addClass("Ov(h)")}
/**
 * function to open sort thread by (filter)
 */function openSortThread(e){$(e).parent().next().show(),$(".jsOverlay").show(),$(e).find(".jsIconMovement").addClass("turnIcon"),$(document.body).addClass("Ov(h)")}
/**
 * function to open bottom option popover
 */function BottomOptionPopover(e){$(e).next().slideDown(),$(".jsOverlay").show(),$(document.body).addClass("Ov(h)")}
/**
 * function to subscribe thread
 */function subsThread(e){$(e).hasClass("is-subcribed")?$(e).removeClass("is-subcribed"):$(e).addClass("is-subcribed")}
/**
 * bind close btn notice
 */
// $('.closeNoticeBtn').on('click', function(){
//   $(this).parents('.noticeParent').hide();
// })
// 
// 
function scrollBtnFixed(){var e=$(window).height(),t=$(window).scrollTop(),s=$(".jsBtnFixedAnchor").offset();0<$(".jsBtnFixedAnchor").length&&(t>s.top-e+64?$(".jsBtnFixed").removeClass("Pos(f)").addClass("Pos(a)"):$(".jsBtnFixed").addClass("Pos(f)").removeClass("Pos(a)"))}function scrollCopyLink(){5<$(window).scrollTop()?$(".copiedLink").css("top","75px"):$(".copiedLink").css("top","100px")}function scrollHeader(){var e;0<$(".jsNoticeHeader").length&&0<$(".jsHeader").length&&(e=$(window).scrollTop()<$(".jsNoticeHeader").outerHeight()?$(".jsNoticeHeader").outerHeight()-$(window).scrollTop():0,$(".jsHeader").css("top",e+"px"))}function PositionBackToTop(){20<$(window).scrollTop()?$("#jsBacktoTop").show():$("#jsBacktoTop").hide()}function backToTopFunction(){$("html, body").animate({scrollTop:0},500)}function setTopNotice(){5<$(window).scrollTop()?$(".jsNoticeWrap").css("top","75px"):$(".jsNoticeWrap").css("top","100px")}function gaTrackOb(e){var t=e.attr("data-category"),s=e.attr("data-label"),a=e.attr("data-state");dataLayer.push({event:"trackEvent","eventDetails.category":t,"eventDetails.action":a,"eventDetails.label":s})}function subscribeUnsubscribe(s){var e;if(subscribeUnsubscribeEls.indexOf(s.attr("id"))<0&&subscribeUnsubscribeEls.push(s.attr("id")),!subscribeUnsubscribeOnProgress){subscribeUnsubscribeOnProgress=!0;var a=s.attr("data-state"),t=s.attr("data-type"),o=s.attr("data-id"),r="/myforum/"+a+"/"+t+"/"+o,i=$("#securitytoken").val();i?$.ajax({type:"POST",url:r,data:{securitytoken:i},xhrFields:{withCredentials:!0},success:function(e){"object"!=typeof e&&(e=$.parseJSON(e)),"TRUE"==e.flag&&(gaTrackOb(s),"subscribe"==a?($("#securitytoken").val(e.securitytoken),s.attr("data-state","unsubscribe"),"icon-thread"==s.attr("data-style")?s.children("i").toggleClass("is-subcribed"):s.text("Unsubscribe")):(s.attr("data-state","subscribe"),"icon-thread"==s.attr("data-style")?s.children("i").toggleClass("is-subcribed"):s.text("Subscribe")));var t=subscribeUnsubscribeEls.indexOf(s.attr("id"));-1<t&&subscribeUnsubscribeEls.splice(t,1),subscribeUnsubscribeOnProgress=!1,0<subscribeUnsubscribeEls.length&&subscribeUnsubscribe($("#"+subscribeUnsubscribeEls[0]))},error:function(e){var t=subscribeUnsubscribeEls.indexOf(s.attr("id"));-1<t&&subscribeUnsubscribeEls.splice(t,1),subscribeUnsubscribeOnProgress=!1,0<subscribeUnsubscribeEls.length&&subscribeUnsubscribe($("#"+subscribeUnsubscribeEls[0]))}}):window.location.href=r}}
// JS BACKEND
function fetchCategories(){url=WAP_KASKUS_URL+"/misc/get_categories/"+catVersion+"/"+theme,$.retrieveJSON(url,{usergroupid:userGroupIdJSON,theme:theme},function(e){retryFetch&&e.version!=catVersion?($.clearJSON(url,{usergroupid:userGroupIdJSON}),retryFetch=0,fetchCategories()):(catLoad=!0,$("#forum-categories").append(e.forum),$("#fjb-categories").append(e.jb),$("#filter-cat-fjb").on("keyup",function(e){searchCategory("fjb")}),$("#filter-cat-forum").on("keyup",function(e){searchCategory("forum")}))},864e5)}function searchCategory(e){searchField=$("#filter-cat-"+e).find("div input").val();try{var t=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();if(myExp=new RegExp(searchField,"i"),""===searchField)return $("#jsCategory"+t).find(".c-category__item").removeClass("disappear"),$("#"+e+"-category-list").removeClass("disappear"),void $("#"+e+"-category-search").addClass("disappear");$("#jsCategory"+t).find(".c-category__item").addClass("disappear"),$("#"+e+"-category-list").addClass("disappear"),$("#"+e+"-category-search").removeClass("disappear"),$("#"+e+"-category-search").html(""),output="",not_found=!0,$("#"+e+"-categories").find(".list__item div span").each(function(e,t){-1!=$(t).first().text().search(myExp)&&(output+='<div class="list__item"><div class="Pstart(28px) Py(15px) Px(10px)"><span>'+$(t).html()+"</span></div></div>",not_found=!1)}),not_found&&(output+='<div class="P(10px)">No result</div>'),$("#"+e+"-category-search").append(output)}catch(e){}}function get_search_dropdown(){var e=Date.now()/1e3;parseFloat(last_process_time)+one_second>e||(last_process_time=e,get_top_keyword(),get_search_history(),show_search_drop_down())}function show_search_drop_down(){var e=get_term_local_data("top_keyword"),t=get_cookie_term_local_data("search_history_"+user_id);show_template_search(e,"top_search_choice","top_search","last_top_keyword"),show_template_search(t,"history_search_choice","history_search","last_search_history")}function show_template_search(e,t,s,a){var o="";for(var r in e)o+='<div class="P(10px)"><a class="C(#484848) nightmode_C(#dcdcdc)" href="'+link_search+"?q="+e[r]+'">'+e[r]+"</a></div>";o!=window[a]&&(document.getElementById(t).innerHTML=o,window[a]=o,indexSelected=-1),document.getElementById(s).style.display=""==o?"none":"block"}function get_top_keyword(){var e=null;e=localStorage?parseFloat(localStorage.getItem("top_keyword_date")):local_top_keyword_date;var t=Date.now()/1e3;(isNaN(e)||e+ten_minutes<t)&&$.ajax({url:"/misc/get_top_keyword",success:function(e){localStorage?(localStorage.setItem("top_keyword",e),localStorage.setItem("top_keyword_date",Date.now()/1e3)):(local_top_keyword=JSON.parse(e),local_top_keyword_date=Date.now()/1e3),show_search_drop_down()},error:function(){show_search_drop_down()}})}function get_search_history(){var e=parseFloat($.cookie("search_history_date_"+user_id)),s=Date.now()/1e3;(isNaN(e)||e+ten_minutes<s)&&$.ajax({url:"/misc/get_search_history",success:function(e){var t="";t="undefined"!=typeof KASKUS_COOKIE_DOMAIN?KASKUS_COOKIE_DOMAIN:COOKIE_DOMAIN,s=Date.now()/1e3,$.cookie("search_history_"+user_id,e,{expires:s+ten_minutes,path:"/",domain:t,secure:!1}),$.cookie("search_history_date_"+user_id,s,{expires:s+ten_minutes,path:"/",domain:t,secure:!1}),show_search_drop_down()},error:function(){show_search_drop_down()}})}function get_term_local_data(e){var t={};if(localStorage){if(t=localStorage.getItem(e))try{t=JSON.parse(t)}catch(e){t={}}}else t=window["local_"+e];return t||{}}function get_cookie_term_local_data(e){var t=$.cookie(e);try{t=JSON.parse(t)}catch(e){t={}}return t}function remove_search_history(){$.ajax({url:"/misc/remove_search_history",success:function(){var e="";e="undefined"!=typeof KASKUS_COOKIE_DOMAIN?KASKUS_COOKIE_DOMAIN:COOKIE_DOMAIN,date_now=Date.now()/1e3,$.cookie("search_history_"+user_id,"[]",{expires:date_now+ten_minutes,path:"/",domain:e,secure:!1}),$.cookie("search_history_date_"+user_id,date_now,{expires:date_now+ten_minutes,path:"/",domain:e,secure:!1}),show_search_drop_down()}})}function load_tl(){if(tl_no_more_item)return $("#tl-loader").hide(),!1;tl_is_loading=!0,tl_cursor=$("#tl_cursor").val(),tl_order=$("#tl_order").val(),tl_sort=$("#tl_sort").val(),tl_sort_track=$("#tl_sort_track").val(),$.ajax({type:"post",url:"/misc/get_thread_list/",data:{cursor:tl_cursor,sort:tl_sort,order:tl_order},success:function(e){try{display_tl(e),"MutationObserver"in window!=1&&initLazyload()}catch(e){}tl_is_loading=!1},error:function(){tl_is_loading=!1}})}function display_tl(e){tl_page++,dataLayer.push({event:"trackEvent","eventDetails.category":tracking_ref,"eventDetails.action":"load more","eventDetails.label":"threadlist-"+tl_sort_track});var t=0;$("#tl_cursor").val(e.cursor);var s=e.html,t;$(s).insertBefore("#tl-loader"),(e.totalcount<tl_limit||10<tl_page)&&($("#tl-loader").hide(),tl_no_more_item=!0)}function isElementInViewport(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom-100<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function load_oh(){if(oh_no_more_item)return $("#oh-loader").hide(),!1;oh_is_loading=!0,oh_cursor=$("#oh_cursor").val(),$.ajax({type:"post",url:"/misc/get_obrolan_hangat/",data:{channel_id:channel_id,cursor:oh_cursor},success:function(e){try{display_oh(e)}catch(e){}oh_is_loading=!1},error:function(){oh_is_loading=!1}})}function display_oh(e,t){oh_page++,dataLayer.push({event:"trackEvent","eventDetails.category":tracking_ref,"eventDetails.action":"load more","eventDetails.label":"obrolan hangat"});var s=$.parseJSON(e),a=s.html,o=s.total;$(a).insertBefore("#oh-loader"),$("#oh_cursor").val(s.obrolan_hangat_cursor),(o<oh_limit||2<oh_page)&&($("#oh-loader").hide(),oh_no_more_item=!0)}
// END
// Function Play Video
function clickVideo(e){if(-1<(" "+e.className+" ").indexOf(" playing ")){e.className=e.className.replace(/(?:^|\s)playing(?!\S)/g,"");var t=e.getElementsByTagName("video")[0];for(t.setAttribute("src",""),t.pause();t.firstChild;)t.removeChild(t.firstChild)}else{e.className+=" playing";var s=document.createElement("source");s.src=e.getAttribute("data-src"),s.type="video/mp4",e.getElementsByTagName("video")[0].setAttribute("src",e.getAttribute("data-src")),e.getElementsByTagName("video")[0].appendChild(s),e.getElementsByTagName("video")[0].play(),e.hasAttribute("data-threadid")&&(listThreadId.push(e.getAttribute("data-threadid")),e.removeAttribute("data-threadid"),updateView())}}
// End
function dataURLtoFile(e,t){for(var s=e.split(","),a=s[0].match(/:(.*?);/)[1],o=atob(s[1]),r=o.length,i=new Uint8Array(r);r--;)i[r]=o.charCodeAt(r);return new File([i],t,{type:a})}function removeAvatar(){confirm("Are You sure to remove this profile picture ? ")&&$.post("/user/removeprofilepicture/",{userimgrev:$("#userimgrev").val()},function(e){alert(e.notice),$("#removeimage").text(""),$("#userimgrev").val(e.userimgrev),$("#userimgtime").val(e.userimgtime),$("#preview-image").html('<img src="'+e.url+'"/>'),$.ajax({url:"/user/update_avatar",type:"post",data:{userimgtime:e.userimgtime,userimgrev:e.userimgrev,imgurl:e.url},success:function(e){e=$.parseJSON(e),$("#preview-image").html('<img class="Bdrs(50%) P(4px)" id="jsImageAvatar" src="'+e.imgurl+'" alt="user profile picture"/>'),$("#preview-image").append('<div class="Pos(a) W(35px) H(35px) Bgc(bgTransparentLight) Ta(c) Lh(35px) Bdrs(50%) T(22px) Start(22PX) Fz(14px) C(#1998ed) nightmode_C(#3f3f3f)"><i class="fas fa-camera"></i></div>'),$("#remove_avatar").hide()}})},"json")}function removeCoverImage(){confirm("Are You sure to remove this cover image ? ")&&$.post("/user/removecoverimage/",{coverimageurl:$("#jsImageCover").attr("src")},function(e){$.ajax({url:"/user/update_cover_image",type:"post",data:{imgurl:e.cover_image_url,action:"delete"},success:function(e){$("#jsImageCover").attr("src",assetsFolderNew+"/images/placeholder-cover-image.png"),$("#remove_cover").hide()}})},"json")}var timeout,resized=!1;$(function(){$("div.jsSpoilerHead").on("click",function(e){e.stopPropagation(),$(this).parent().next().hasClass("is-hide")?($(this).parent().next().removeClass("is-hide"),$(this).parent().next().addClass("is-show"),$(this).find(".jsSpoilerBtn").text("hide"),$(this).find(".jsIconMovement").addClass("turnIcon")):($(this).parent().next().removeClass("is-show"),$(this).parent().next().addClass("is-hide"),$(this).find(".jsSpoilerBtn").text("show"),$(this).find(".jsIconMovement").removeClass("turnIcon"))})}),$(document).ready(function(){function e(){isElementInViewport($("#oh-loader"))&&0==oh_is_loading&&load_oh()}function t(){isElementInViewport($("#tl-loader"))&&0==tl_is_loading&&load_tl()}
/**
        * bind click to show hide notice
    */
// $(".jsShowNoticeBtn").on('click', function() {
//     $(".jsNotice").fadeIn("slow").delay(5000).fadeOut();
//     if ($(".jsHeader").css('top','0')) {
//         $(".jsNotice").css('top','75px');
//     }
//     else {
//         $(".jsNotice").css('top','100px');
//     }
// });
uploadAvatar(),uploadCover(),
/**
        * bind focus on search categories all forum landing
    */
$(".jsInputSearch").focusin(function(){$(".jsCancelSearch").show()}),$(".jsInputSearch").focusout(function(){$(".jsCancelSearch").hide()}),
/**
        Check notification tab changed to call scroll button function
    */
0<$(".jsTabNotifWrapper").length&&onElementHeightChange(document.querySelector(".jsTabNotifWrapper"),function(){scrollBtnFixed()})
/**
        * bind click to show hide thread
    */,$(".jsShowThread").on("click",function(){$(this).parent().find(".jsThreadContent").hasClass("is-show")?($(this).parent().find(".jsThreadContent").removeClass("is-show").addClass("is-hide"),$(this).find(".jsThreadBtnTxt").text("Tampilkan isi Thread"),$(this).find(".jsIconMovement").removeClass("turnIcon")):($(this).parent().find(".jsThreadContent").removeClass("is-hide").addClass("is-show"),$(this).find(".jsThreadBtnTxt").text("Sembunyikan isi thread"),$(this).find(".jsIconMovement").addClass("turnIcon")),$("html, body").animate({scrollTop:$(".is-first-post").offset().top},1e3)}),
/**
        * bind click and change when click on jsOverlay
    */
$(".jsOverlay").on("click change",function(){$(".jsSortThreadBy").hide(),$(".jsBottomOptionContent").slideUp(),$(".jsRating").hide(),$(".jsOverlay").hide(),$(".jsSortThreadHead").find(".jsIconMovement").removeClass("turnIcon"),$(document.body).removeClass("Ov(h)")}),
/**
        * bind click when sort thread and rating thread
    */
$(".jsSortItem, .jsRatingItem, .itemOption").on("click",function(){$(".jsBottomOptionContent").slideUp(),$(".jsSortThreadBy").hide(),$(".jsRating").hide(),$(".jsOverlay").hide(),$(".jsSortThreadHead").find(".jsIconMovement").removeClass("turnIcon"),$(document.body).removeClass("Ov(h)")}),
/**
     *Bind clicks subscribe Thread
    */
$("body").on("click",".jsSubscribeThreadIcon",function(){subscribeUnsubscribe($(this))}),
/**
        * bind movement show hide btn
    */
$(".jsShowHideBtn").on("click",function(e){$(this).next().toggleClass("is-open"),$(this).find(".jsIconMovement").toggleClass("turnIcon"),$(this).next().hasClass("is-open")?$(this).find(".subForumList i").attr("class","fas fa-minus-circle"):$(this).find(".subForumList i").attr("class","fas fa-plus-circle")}),$(".jsCategoryItem").each(function(e){$(this).on("scroll",function(){0<$(this).scrollTop()?$(".jsCategoryItem").parent().addClass("fixed"):$(".jsCategoryItem").parent().removeClass("fixed")})}),$("#fjb-tab").on("click",function(){$("#forum-tab").hasClass("active-forum")&&($("#forum-tab").removeClass("active-forum"),$("#fjb-tab").addClass("active-fjb"),$("#jsCategoryForum").removeClass("open"),$("#jsCategoryFjb").addClass("open"),$("#filter-cat-forum").addClass("disappear"),$("#filter-cat-forum").removeClass("appear"),$("#filter-cat-fjb").addClass("appear"),$("#filter-cat-fjb").removeClass("disappear"))}),$("#forum-tab").on("click",function(){$("#fjb-tab").hasClass("active-fjb")&&($("#fjb-tab").removeClass("active-fjb"),$("#forum-tab").addClass("active-forum"),$("#jsCategoryFjb").removeClass("open"),$("#jsCategoryForum").addClass("open"),$("#filter-cat-fjb").addClass("disappear"),$("#filter-cat-fjb").removeClass("appear"),$("#filter-cat-forum").addClass("appear"),$("#filter-cat-forum").removeClass("disappear"))}),$("#jsSearchButton,#jsSearchCancelButton").on("click",function(){$("#searchform").hasClass("active")?($("#searchform").removeClass("active"),$("#JsCatBar").addClass("active"),$("#jsSearchButton").css("color","#ddd"),$("#category-swipe").removeClass("disappear"),$(".search-overlay").removeClass("is-show"),$("body").removeClass("o-hidden")):($("#searchform").addClass("active"),$("#JsCatBar").removeClass("active"),$("#jsSearchButton").css("color","#ff7100"),$("input[name=q]").focus(),$("#category-swipe").addClass("disappear"),$(".search-overlay").addClass("is-show"),$("body").addClass("o-hidden"))}),$("#global-search").focusin(function(){$(".global-search-results").addClass("is-show")}),$("#jsListButton").on("click",function(e){$(".jsContentList").addClass("list-type"),$(".jsContentList").removeClass("grid-type"),$("#jsListButton").removeClass("is-hide"),$("#jsGridButton").addClass("is-hide")}),$("#jsGridButton").on("click",function(e){$(".jsContentList").addClass("grid-type"),$(".jsContentList").removeClass("list-type"),$("#jsListButton").addClass("is-hide"),$("#jsGridButton").removeClass("is-hide")}),$("#jsDropdownArrow").on("click",function(e){$("#jsThreadSort").toggleClass("is-open"),$(document.body).toggleClass("o-hidden")}),$("#jsListSubButton").on("click",function(e){$("#thumbSubForum").addClass("is-hide"),$("#listSubForum").removeClass("is-hide"),$("#jsListSubButton").removeClass("is-hide"),$("#jsGridSubButton").addClass("is-hide")}),$("#jsGridSubButton").on("click",function(e){$("#listSubForum").addClass("is-hide"),$("#thumbSubForum").removeClass("is-hide"),$("#jsListSubButton").addClass("is-hide"),$("#jsGridSubButton").removeClass("is-hide")}),$(".threadSortRadio").on("click",function(){$(this).find("input:radio").prop("checked",!0)}),$(".jsShowHide").on("click",function(e){$(this).toggleClass("is-unactive"),$(this).siblings(".jsExpand").toggleClass("is-hide"),$(this).hasClass("is-unactive")?($(this).find("i").attr("class","fa fa-chevron-down"),$(this).find("i").removeClass("fa-chevron-up")):($(this).find("i").attr("class","fa fa-chevron-up"),$(this).find("i").removeClass("fa-chevron-down"))}),scrollHeader(),jsmoreShare(),$(".jsBotScroll").on("scroll",function(){var e=$(this).scrollLeft(),t;0==e?$(".jsContainerCat").removeClass("headerShadow"):e==$(this)[0].scrollWidth-$(this).parent().width()?$(".jsContainerCat").removeClass("headerShadow"):$(".jsContainerCat").addClass("headerShadow")}),$(".jsBotScroll").trigger("scroll"),$(".pass-trigger").on("click",function(){$(this).find(".pass-icon-eye").hasClass("fa-eye-slash")?($(this).find(".pass-icon-eye").addClass("fa-eye").removeClass("fa-eye-slash"),$(".pass-input-control").prop("type","text")):($(this).find(".pass-icon-eye").addClass("fa-eye-slash").removeClass("fa-eye"),$(".pass-input-control").prop("type","password"))}),$(".jsSignUpTab").on("click",function(){$(".jsSignInTab").hasClass("active")&&($(".jsSignInTab").removeClass("active"),$(".jsSignUpTab").addClass("active"),$(".signInContent").hide(),$(".signUpContent").show())}),$(".jsSignInTab").on("click",function(){$(".jsSignUpTab").hasClass("active")&&($(".jsSignUpTab").removeClass("active"),$(".jsSignInTab").addClass("active"),$(".signInContent").show(),$(".signUpContent").hide())}),$(".jsSmiliesBtn").on("click",function(e){$(".jsSmiliesWrapper").toggleClass("is-open");
// $(".jsSmiliesWrapper").find(".toggleMenu").toggleClass("is-visible");
}),$(".jsSmiliesTabNavHead li a, .jsTabNav li a").on("click",function(e){var t=$(this).attr("href");$(".jsSmiliesWrapper, .jsTabWrapper "+t).show().siblings().hide(),$(this).parent("li").addClass("active").siblings().removeClass("active"),e.preventDefault()}),$(".jsAccordionHeading").click(function(e){e.preventDefault();var t=$(this);t.next().hasClass("reveal")?(t.next().removeClass("reveal"),t.next().slideUp(350),t.find("i.fa").removeClass("fa-chevron-up").addClass("fa-chevron-down")):(t.parent().parent().find(".jsAccordionItem .jsAccordionContent").removeClass("reveal"),t.parent().parent().find(".jsAccordionItem .jsAccordionContent").slideUp(350),t.find("i.fa").removeClass("fa-chevron-down").addClass("fa-chevron-up"),t.next().toggleClass("reveal"),t.next().slideToggle(350))}),
/**
    *Bind clicks modal
    */
$(".jsRevealModal").on("click",function(){$("#"+$(this).data("modal")).fadeIn(),$("body").addClass("Ov(h)")}),$(".jsCloseModal, .jsDismissModal").on("click",function(){$(".jsModal").fadeOut(),$("body").removeClass("Ov(h)")}),$(".jsTextareaReply").on("click",function(e){$(".jsTextareaBB").show(),$(".jsTextareaReply").hide(),$(".jsTextareaBB").find("textarea").focus(),e.stopPropagation()}),
//SET BACK TO TOP POSITION BASED ON STICKY BANNER
0<$(".adsSection").length?$(".arrowBacktoTop").css("bottom","60px"):$(".arrowBacktoTop").css("bottom","0px"),
// JS FROM BACKEND
$("#oh-loader").length&&(window.addEventListener("resize",e,{passive:!0}),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("touch",e,{passive:!0}),window.addEventListener("click",e,{passive:!0})),$("#tl-loader").length&&(window.addEventListener("resize",t,{passive:!0}),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("touch",t,{passive:!0}),window.addEventListener("click",t,{passive:!0})),$(".jsSignUpTab").on("click",function(){""==$("#securitytokensignup").val()&&$.get("/register/generate_captcha",function(e){result=JSON.parse(e),$("#captcha_forms").html(result.captcha_form),$("#securitytokensignup").val(result.securitytoken)})}),$("#global-search").focusin(function(){$(".global-search-results").addClass("is-show"),get_search_dropdown()})}),// window.onclick = function(event) {
//   if (event.target.className == 'jsModal') {
//     $('.jsModal').hide();
//     $('body').removeClass('Ov(h)');
//   }
// }
/**
 *Bind clicks anywhere outside of the modal, close it
*/
$(".jsModal").click(function(e){$(e.target).closest(".modal-popup-content").length||($(".jsModal").hide(),$("body").removeClass("Ov(h)"))}),
/**
 *bind textarea on post list
*/
$(document).click(function(e){var t;0<$(".jsTextareaBB").find("textarea").length&&(0<$(".jsTextareaBB").find("textarea").val().length?($(".jsTextareaBB").show(),$(".jsTextareaReply").hide()):$(e.target).closest(".jsTextareaBB, .reply-btn").length||($(".jsTextareaBB").hide(),$(".jsTextareaReply").show()))}),window.addEventListener("scroll",function(){scrollHeader(),PositionBackToTop(),scrollCopyLink(),setTopNotice(),scrollBtnFixed()},{passive:!0});var subscribeUnsubscribeOnProgress=!1,subscribeUnsubscribeEls=[],catLoad=!1,retryFetch=1,ten_minutes=600,one_second=1,local_search_history_date,local_search_history,local_top_keyword_date,local_top_keyword,indexSelected=-1,last_process_time=0,last_search_history,last_top_keyword;tl_limit=20,tl_is_loading=!1,tl_no_more_item=!1,tl_page=1,oh_limit=20,oh_is_loading=!1,oh_no_more_item=!1,oh_page=1;