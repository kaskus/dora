function scrollHeaderSticky(){var e=$(".jsNavHeader").offset().top+$(".jsNavHeader").height();$(window).scrollTop()>e?($(".jsStickyHeader").css("transform","translateY(0px)"),positionOverlayHeader=0,$(".jsFlyoutAnchor").appendTo(".jsFlyoutTriggerSticky"),$(".jsUserDropdownMenu").appendTo(".jsUserAnchorSticky"),$(".jsNotificationDropdownMenu").appendTo(".jsNotificationAnchorSticky"),$(".jsSearchFormInput").is(":focus")&&$(".jsSearchFormInput").blur(),1==onTop&&$(".jsPodcastWidgetHeaderIframe").hasClass("is-sticky")&&(
//$('.jsPodcastWidgetHeaderIframe').appendTo('.jsPodcastWidgetAnchorSticky');
//$('.jsPodcastWidgetHeaderIframe').toggleClass('Start(0) End(0)');
setTimeout(function(){$(".jsPodcastWidgetHeaderIframe").toggleClass("is-scrolled Pos(f) Pos(a) Start(0) T(0) T(50px)")},300),onTop=!1),$(".jsSearchFormInput").blur()):($(".jsStickyHeader").css("transform","translateY(-200px)"),
//positionOverlayHeader = $('.jsNavHeader').offset().top + 90 - $(window).scrollTop();
$(".jsFlyoutAnchor").appendTo(".jsFlyoutTrigger"),$(".jsUserDropdownMenu").appendTo(".jsUserAnchor"),0==onTop&&$(".jsPodcastWidgetHeaderIframe").hasClass("is-sticky")&&(
// $('.jsPodcastWidgetHeaderIframe').appendTo('.jsPodcastWidgetAnchor');
// $('.jsPodcastWidgetHeaderIframe').toggleClass('Start(0) End(0)')
$(".jsPodcastWidgetHeaderIframe").toggleClass("is-scrolled Pos(f) Pos(a) Start(0) T(0) T(50px)"),onTop=!0),$(".jsNotificationDropdownMenu").appendTo(".jsNotificationAnchor"));
//console.log(positionOverlayHeader);
}function scrollSkyscrapper(){var e=$(".jsLeaderboardSkyscrapper").offset().top,t=$(".jsStickyHeader").height(),s=600,a=$(".jsMainContent").outerHeight(!0),o=$(".jsLeaderboardAds").length?$(".jsLeaderboardAds").outerHeight(!0):0,i=$(".jsNoticeBoard").length?$(".jsNoticeBoard").outerHeight(!0)*$(".jsNoticeBoard").length:0,r=$(".jsBreadcrumb").length?$(".jsBreadcrumb").outerHeight(!0):0,l,n=30,c=10,d=t+c,u=a+($(".jsBottomLeaderboardAds").length?$(".jsBottomLeaderboardAds").outerHeight(!0):0)+o+i+r-s,f,_=e-t-c,p=$(".jsMainFooter").offset().top-s-d-n;
//kondisi harus sticky
$(window).scrollTop()>_?(
//console.log(tinggiMainContent );
$(".jsSkyscrapperAds").css("position","fixed"),$(".jsSkyscrapperAds").css("transform","translateY("+d+"px)"),
//kondisi harus absolute
$(window).scrollTop()>p&&($(".jsSkyscrapperAds").css("position","absolute"),$(".jsSkyscrapperAds").css("transform","translateY("+u+"px)"))):($(".jsSkyscrapperAds").css("position","initial"),$(".jsSkyscrapperAds").css("transform","none"))}
/*
function buat subforum fixed sidebar
 */function checkStickySubforumSidebar(){var e,t=$(".jsMainContent").offset().top,s=$(".jsMainContent").outerHeight(),a=$(".jsSubforumFixedSidebar").outerHeight();$(window).scrollTop()>t-50?(
//$('.jsSubforumFixedSidebar').css("transform", 'translateY(60px)');
$(".jsSubforumFixedSidebar").css("top","50px"),$(window).scrollTop()>t+s-a-50&&(e=t+s-$(window).scrollTop()-a,$(".jsSubforumFixedSidebar").css("top",e+"px"))):(e=$(".jsMainContent").offset().top-$(window).scrollTop(),$(".jsSubforumFixedSidebar").css("top",e+"px"))}function checkScroller(e){e[0].scrollHeight>e.height()&&(
// mentok bawah
e[0].scrollHeight-e.scrollTop()==e.outerHeight()?e.siblings(".flyout__scroll--down").removeClass("flyout__scroll--on"):0===e.scrollTop()?e.siblings(".flyout__scroll--up").removeClass("flyout__scroll--on"):(e.siblings(".flyout__scroll--down").addClass("flyout__scroll--on"),e.siblings(".flyout__scroll--up").addClass("flyout__scroll--on")))}
//scroll top main category nav
// get category search header area
function get_cat(e){"forum"==e||"fjb"==e?($(".select-category").addClass("show"),$.ajax({url:"/misc/get_categories_search/"+e,success:function(e){var t=location.href.match(/forumchoice(\[\])*=([^&]+)/),s="";t&&(s=t[2]);var a="";for(var o in e)s==e[o].forum_id?(a="selected",$("#search_category").parent().find(".customSelectInner").text(e[o].name)):a="",$("#search_category").append('<option data-child-list="'+e[o].child_list+'" value="'+e[o].forum_id+'" '+a+">"+e[o].name+"</option>")}})):$(".select-category").removeClass("show")}
// Spoiler
function spoiler(e){"Show"==e.value?($(".content_"+$(e).attr("class")).slideDown(0),e.innerHTML="",e.value="Hide"):($(".content_"+$(e).attr("class")).slideUp(0),e.innerHTML="",e.value="Show")}function get_smilies(){if(localSmilies=get_MRU(),localSmilies)var e={smilies:$.param(localSmilies)};$.ajax({method:"POST",url:"/misc/get_smilies",data:e||{},success:function(e){e=JSON.parse(e),smilies=JSON.parse(e.kaskus),$(".smilies-tab").replaceWith(smilies.tab),$(".smilies-tab-content").replaceWith(smilies.content),e.mru?(smilies_mru=e.mru,$("#content-mru").html(smilies_mru),
// $('.smiley-tab > .nav-tabs > li[id^="group"]:first').removeClass('active');
// $('#emoticons .tab-content > .tab-pane[id^="tab"]:first').removeClass('active');
$("#mru").addClass("active"),$("#content-mru").addClass("active"),load_MRU()):$("#mru").hide(),show_tab(".smiley-wrapper .smiley-tab .tab-content > .active"),$(".smiley-tab__item").not(".smiley-tab__item--unavailable").find(".smilie__in-action").click(function(){get_focus(),smiley_tracking(this.children),insert_smilikiti(this.children)}),$("#emoticons").show()}})}function printDiv(e){window.frames.print_frame.document.body.innerHTML=document.getElementById(e).innerHTML,window.frames.print_frame.window.focus(),window.frames.print_frame.window.print()}function get_MRU(){var e=[];if(localStorage[mru_key]&&(mru=JSON.parse(localStorage[mru_key]),mru)){for(var t in mru)-1<t.search("smilie")&&e.push(mru[t]);var s={smilies:e}}return s||{}}function load_MRU(){var e=$("#content-mru").find(".loadMRU");return e&&$.each(e,function(e,t){$(t).attr("src",$('.loadSmilies[alt="'+$(t).attr("alt")+'"]').attr("data-src")),$(t).attr("title",$('.loadSmilies[alt="'+$(t).attr("alt")+'"]').attr("title")),$(t).removeAttr("class")}),!0}function show_tab(e){var t=$(e).find(".loadSmilies");return t&&$.each(t,function(e,t){$(t).attr("src",$(t).attr("data-src")),$(t).removeAttr("data-src"),$(t).removeAttr("class")}),!0}function insert_smilikiti(e){if(localStorage){var t;if(t=JSON.parse(localStorage.getItem(mru_key)))for(var s in t)s==="smilie"+$(e).attr("alt")&&delete t[s];else var t=new Object;mru_limit==Object.keys(t).length&&delete t[Object.keys(t)[0]],t["smilie"+$(e).attr("alt")]=$(e).attr("alt"),localStorage.setItem(mru_key,JSON.stringify(t))}emoticon=$(e).attr("alt")+" ",$.markItUp({replaceWith:emoticon}),"1"!==$.cookie("use_old_qnt")&&(sceditorInstance.inSourceMode()?sceditorInstance.insert($(e).attr("alt")):sceditorInstance.insert('<img src="'+$(e).attr("src")+'" data-sceditor-emoticon="'+$(e).attr("alt")+'" border="0" alt="emoticon-'+$(e).attr("title")+'" title="'+$(e).attr("title")+'">',null,!1))}
// notice
function notice(e,t){void 0===t&&(t=3e3),document.notice_tid&&clearTimeout(document.notice_tid),$("#notice_span").html(e),$("#floating_notice").show(),document.notice_tid=setTimeout(function(){$("#floating_notice").fadeOut()},t)}function printContent(e){var t=document.body.innerHTML,s=document.getElementById(e).innerHTML;document.body.innerHTML=s,window.print(),document.body.innerHTML=t}
// Jump to page
function jump_page(e){var t=$("#"+e).val(),s=$(".url_jump").val();window.location.href=s+t}function show_signin_popup(e){$.ajax({url:"/user/login/"+e,success:function(e){$("#jsModalSignin .modal-body").html(e),$("#username").focus()}})}function show_signup_popup(e){$.ajax({url:"/register/index/"+e,success:function(e){$("#jsModalSignin .modal-body").html(e),$("#signup_email").focus()}})}
//SEARCH
function get_search_dropdown(){var e=Date.now()/1e3;parseFloat(last_process_time)+one_second>e||(last_process_time=e,get_top_keyword(),get_search_history(),show_search_drop_down())}function show_search_drop_down(){var e=get_term_local_data("top_keyword"),t=get_cookie_term_local_data("search_history_"+user_id);show_template_search(e,"top_search_choice","#top_search","last_top_keyword"),show_template_search(t,"history_search_choice","#history_search","last_search_history"),$(".jsSearchResult li").hover(function(e){$(".jsSearchResult").find("li.is-selected").removeClass("is-selected"),$(this).addClass("is-selected"),indexSelected=$(".jsSearchResult li").index($(this))}),$(".jsSearchResult li").mousedown(function(e){e.preventDefault(),$("#search").val($(this).text()),$("#btn-search").click()})}function show_template_search(e,t,s,a){var o="";for(var i in e)o+='<li><a href="javascript:void(0);" class="D(b) P(5px) C(#484848) Fz(12px) Td(n):h Bgc(#f2f2f2):h">'+e[i]+"</a></li>";o!=window[a]&&(document.getElementById(t).innerHTML=o,window[a]=o,indexSelected=-1),""==o?$(s).hide():$(s).show()}function get_top_keyword(){var e=null;e=localStorage?parseFloat(localStorage.getItem("top_keyword_date")):local_top_keyword_date;var t=Date.now()/1e3;(isNaN(e)||e+ten_minutes<t)&&$.ajax({url:"/misc/get_top_keyword",success:function(e){localStorage?(localStorage.setItem("top_keyword",e),localStorage.setItem("top_keyword_date",Date.now()/1e3)):(local_top_keyword=JSON.parse(e),local_top_keyword_date=Date.now()/1e3),show_search_drop_down()},error:function(){show_search_drop_down()}})}function get_search_history(){var e=parseFloat($.cookie("search_history_date_"+user_id)),s=Date.now()/1e3;(isNaN(e)||e+ten_minutes<s)&&$.ajax({url:"/misc/get_search_history",success:function(e){var t="";t="undefined"!=typeof KASKUS_COOKIE_DOMAIN?KASKUS_COOKIE_DOMAIN:COOKIE_DOMAIN,s=Date.now()/1e3,$.cookie("search_history_"+user_id,e,{expires:s+ten_minutes,path:"/",domain:t,secure:!1}),$.cookie("search_history_date_"+user_id,s,{expires:s+ten_minutes,path:"/",domain:t,secure:!1}),show_search_drop_down()},error:function(){show_search_drop_down()}})}function get_term_local_data(e){var t={};if(localStorage){if(t=localStorage.getItem(e))try{t=JSON.parse(t)}catch(e){t={}}}else t=window["local_"+e];return t||{}}function get_cookie_term_local_data(e){var t=$.cookie(e);try{t=JSON.parse(t)}catch(e){t={}}return t}function remove_search_history(){$.ajax({url:"/misc/remove_search_history",success:function(){var e="";e="undefined"!=typeof KASKUS_COOKIE_DOMAIN?KASKUS_COOKIE_DOMAIN:COOKIE_DOMAIN,date_now=Date.now()/1e3,$.cookie("search_history_"+user_id,"[]",{expires:date_now+ten_minutes,path:"/",domain:e,secure:!1}),$.cookie("search_history_date_"+user_id,date_now,{expires:date_now+ten_minutes,path:"/",domain:e,secure:!1}),show_search_drop_down()}})}function fetchCategories(){url=KASKUS_URL+"/misc/get_categories/"+catVersion,$.retrieveJSON(url,{},function(e){var s,a;retryFetch&&e.version!=catVersion?($.clearJSON(url,{}),retryFetch=!1,fetchCategories()):($("#cat-forum").replaceWith(e.forum),$("#cat-jb").replaceWith(e.jb),catLoaded=!0,$("#filter-cat-forum").bind("keydown keyup",function(e){var t=$("#update-tag ul.sidebar-category").find("li");
// if keydown
if(40===e.which)"keydown"===e.type&&(s?(s.removeClass("selected"),next=s.next(),0<next.length?s=next.addClass("selected"):s.addClass("selected")):s=t.eq(0).addClass("selected")),a=$(".scrolling-con-update ul li.selected").position().top-140;else if(38===e.which)"keydown"===e.type&&(s?(s.removeClass("selected"),next=s.prev(),0<next.length?s=next.addClass("selected"):s.addClass("selected")):s=t.last().addClass("selected"));
//valscroll = ( $(".scrolling-con-update ul li.selected").position().top ) - 140;
//$('.mCSB_container').attr('style', 'position:relative;top:-'+ valscroll +'px;');
// presss enter get redirect URL
else if(13===e.which)0<$(".scrolling-con-update").find("li.selected").length&&(window.location=$(".scrolling-con-update li.selected .categories-title").children("a").attr("href"));else
// keyup get data json and append listing data
if("keyup"===e.type){$("#update-tag ul.sidebar-category").find("li").removeClass("selected"),searchField=$("#filter-cat-forum").val(),$(".flyout__search i").removeClass("fa-search"),$(".flyout__search i").addClass("fa-times"),
// close filter categories
$("#jsCategoryTabForum .flyout__search i.fa-times").click(function(e){$(this).removeClass("fa-times"),$(this).addClass("fa-search"),$("#filter-cat-forum").val(""),$("#update-tag").html(""),$("#update-tag").addClass("hide")});try{if(myExp=new RegExp(searchField,"i"),""===searchField)return $("#update-tag").addClass("hide"),$("#jsCategoryTabForum .flyout__search i").removeClass("fa-times"),$("#jsCategoryTabForum .flyout__search i").removeClass("fa-search"),!1;$.retrieveJSON(urlCatJSON,{usergroupid:userGroupIdJSON},function(e){$("#update-tag").removeClass("hide"),
//heightUpdateContent = $('.tag-wrap').height() - 28;
//$('#update-tag').children('.scrolling-con-update').height(heightUpdateContent);
output='<ul class="flyout__result__list"><div class="flyout__scroll flyout__scroll--up"><i class="fa fa-chevron-up"></i></div>',$.each(e,function(e,t){-1!=t.forum_name.search(myExp)&&(output+='<li class="flyout__result__item">',output+='<a class="flyout__result__link" href="'+decodeURIComponent(t.forum_url)+'">',output+='<img src="'+decodeURIComponent(t.forum_icon)+'" alt="" width="20" height="20" ><span>'+decodeURIComponent(t.forum_name),output+="</span></a>",output+="</li>")}),output+='<div class="flyout__scroll flyout__scroll--down"><i class="fa fa-chevron-down"></i></div></ul>',$("#update-tag").html(output)},864e5),s="",checkScroller(".flyout__result__list")}catch(e){
// console.log(err);
}}}),$("#filter-cat-jb").bind("keydown keyup",function(e){var t=$("#update-tag ul.sidebar-category").find("li");
// if keydown
if(40===e.which)"keydown"===e.type&&(s?(s.removeClass("selected"),next=s.next(),0<next.length?s=next.addClass("selected"):s.addClass("selected")):s=t.eq(0).addClass("selected")),a=$(".scrolling-con-update ul li.selected").position().top-140;else if(38===e.which)"keydown"===e.type&&(s?(s.removeClass("selected"),next=s.prev(),0<next.length?s=next.addClass("selected"):s.addClass("selected")):s=t.last().addClass("selected"));
//valscroll = ( $(".scrolling-con-update ul li.selected").position().top ) - 140;
//$('.mCSB_container').attr('style', 'position:relative;top:-'+ valscroll +'px;');
// presss enter get redirect URL
else if(13===e.which)0<$(".scrolling-con-update").find("li.selected").length&&(window.location=$(".scrolling-con-update li.selected .categories-title").children("a").attr("href"));else
// keyup get data json and append listing data
if("keyup"===e.type){$("#update-tag ul.sidebar-category").find("li").removeClass("selected"),searchField=$("#filter-cat-jb").val(),$(".flyout__search i").removeClass("fa-search"),$(".flyout__search i").addClass("fa-times"),
// close filter categories
$("#jsCategoryTabJB .flyout__search i.fa-times").click(function(){$(this).removeClass("fa-times "),$(this).addClass("fa-search "),$("#filter-cat-jb").val(""),$("#update-tag").html(""),$("#update-tag").addClass("hide")});try{if(myExp=new RegExp(searchField,"i"),""===searchField)return $("#update-tag").addClass("hide"),$("#jsCategoryTabJB .flyout__search i").removeClass("fa-times"),$("#jsCategoryTabJB .flyout__search i").addClass("fa-search"),!1;$.retrieveJSON(urlCatJSON,{usergroupid:userGroupIdJSON},function(e){$("#update-tag").removeClass("hide"),
//heightUpdateContent = $('.tag-wrap').height() - 28;
//$('#update-tag').children('.scrolling-con-update').height(heightUpdateContent);
output='<ul class="flyout__result__list"><div class="flyout__scroll flyout__scroll--up"><i class="fa fa-chevron-up"></i></div>',$.each(e,function(e,t){-1!=t.forum_name.search(myExp)&&(output+='<li class="flyout__result__item">',output+='<a class="flyout__result__link" href="'+decodeURIComponent(t.forum_url)+'">',output+='<img src="'+decodeURIComponent(t.forum_icon)+'" alt="" width="20" height="20" ><span>'+decodeURIComponent(t.forum_name),output+="</span></a>",output+="</li>")}),output+='<div class="flyout__scroll flyout__scroll--down"><i class="fa fa-chevron-down"></i></div></ul>',$("#update-tag").html(output)},864e5),s="",checkScroller(".flyout__result__list")}catch(e){
// console.log(err);
}}}),0<$(".flyout__tab__pane > .flyout__category__list").length&&$(".flyout__tab__pane > .flyout__category__list")[0].scrollHeight>$(".flyout__tab__pane > .flyout__category__list").height()&&$(".flyout__tab__pane > .flyout__category__list").siblings(".flyout__scroll--down").addClass("flyout__scroll--on"),
//scroll top main category nav
$(".flyout__category__list").bind("scroll",function(){checkScroller($(this))}),
//scroll top main category search
$(".flyout__result__list").bind("scroll",function(){checkScroller($(this))}),
//scroll anakan main category nav
$(".flyout__category-children__list").bind("scroll",function(){checkScroller($(this))}))},36e5)}function gaTrackOb(e){var t=e.attr("data-category"),s=e.attr("data-label"),a=e.attr("data-state");_gaq.push(["_trackEvent",t,a,s]),dataLayer.push({event:"trackEvent","eventDetails.category":t,"eventDetails.action":a,"eventDetails.label":s})}function subscribeUnsubscribe(p){var e;if(subscribeUnsubscribeEls.indexOf(p.attr("id"))<0&&subscribeUnsubscribeEls.push(p.attr("id")),!subscribeUnsubscribeOnProgress){subscribeUnsubscribeOnProgress=!0;var m=p.attr("data-state"),t=p.attr("data-type"),s=p.attr("data-id"),a="/myforum/"+m+"/"+t+"/"+s,o=$("#securitytoken").val(),h=p.data("name");o?$.ajax({type:"POST",url:a,data:{securitytoken:o},xhrFields:{withCredentials:!0},success:function(e){if("object"!=typeof e&&(e=$.parseJSON(e)),"TRUE"==e.flag)if(gaTrackOb(p),"subscribe"==m){var t;if($("#securitytoken").val(e.securitytoken),p.attr("data-state","unsubscribe"),"icon"==p.attr("data-style"))(t=p.find("i:first")).addClass("C(#f8c31c)"),t.removeClass("C(#b3b3b3) D(n) listThreadItem:h_D(b) C(#f8c31c):h Cur(p):h is-animate");else if("icon-category"==p.attr("data-style")){var t;(t=p.find("i:first")).addClass("C(#f8c31c) C(#b3b3b3):h"),t.removeClass("C(#b3b3b3) D(n) listForumItem:h_D(b) C(#f8c31c):h")}else if("icon-thread"==p.attr("data-style")){var t,s,a;p.attr("title",p.attr("title-unsubscribe")),(t=p.find("i:first")).removeClass("C(#b3b3b3)"),t.addClass("C(#f8c31c)"),(a=(s=document.querySelector(".jsSubscribeThreadIcon"))._tippy).setContent(p.attr("title-unsubscribe")),showBottomToast("Subscribe Thread Berhasil",1500)}else{var o;(o=p.find("span:first")).text("Unsubscribe")}if("forum"==p.data("type")){var i=p.parent().find("a"),r=p.parent(),l;if(0==$("#subscribed_forum").find(".subscribed").length){var n=$("<div/>",{class:"D(f) Ai(c) Mb(10px)"}).appendTo("#subscribed_forum"),c=$("<div/>",{class:"Pos(r)"}).appendTo(n),d=$("<span/>",{class:"Ff(VagRounded) Lts(0.6px) Fz(14px) D(ib) Mt(4px) C(#9e9e9e)",text:"SUBSCRIPTIONS"}).appendTo(c);$("#subscribed_forum").show()}var n=$("<div/>",{class:"Pos(r) subscribed Bgc(#f9f9f9):h My(3px)"}).appendTo("#subscribed_forum"),u;$(i).appendTo(n),n.attr("data-name",h),sortCategories($("#subscribed_forum").find(".subscribed"),"#subscribed_forum"),$(r).remove()}}else{var t;if(p.attr("data-state","subscribe"),"icon"==p.attr("data-style"))(t=p.find("i:first")).removeClass("C(#f8c31c)"),t.addClass("C(#b3b3b3) D(n) listThreadItem:h_D(b) C(#f8c31c):h Cur(p):h is-animate");else if("icon-category"==p.attr("data-style")){var t;(t=p.find("i:first")).removeClass("C(#f8c31c)"),t.addClass("C(#b3b3b3) D(n) listForumItem:h_D(b) C(#f8c31c):h Cur(p):h")}else if("icon-thread"==p.attr("data-style")){var t,s,a;p.attr("title",p.attr("title-subscribe")),(t=p.find("i:first")).removeClass("C(#f8c31c)"),t.addClass("C(#b3b3b3)"),(a=(s=document.querySelector(".jsSubscribeThreadIcon"))._tippy).setContent(p.attr("title-subscribe")),showBottomToast("Unsubscibe Thread Berhasil",1500)}else{var o;(o=p.find("span:first")).text("Subscribe")}if("forum"==p.data("type")){var f="#child_forum_parent";"regional"==p.data("forum-type")&&(f="#child_regional_parent"),updateForumCategories(p,f,h)}}var _=subscribeUnsubscribeEls.indexOf(p.attr("id"));-1<_&&subscribeUnsubscribeEls.splice(_,1),subscribeUnsubscribeOnProgress=!1,0<subscribeUnsubscribeEls.length&&subscribeUnsubscribe($("#"+subscribeUnsubscribeEls[0]))},error:function(e){var t=subscribeUnsubscribeEls.indexOf(p.attr("id"));-1<t&&subscribeUnsubscribeEls.splice(t,1),subscribeUnsubscribeOnProgress=!1,0<subscribeUnsubscribeEls.length&&subscribeUnsubscribe($("#"+subscribeUnsubscribeEls[0]))}}):window.location.href=a}}function updateForumCategories(e,t,s){var a=e.parent().find("a"),o=e.parent(),i=$("<div/>",{class:"Pos(r) listForumItem subscribed Bgc(#f9f9f9):h My(3px)"}).appendTo(t),r,l;$(a).appendTo(i),$(o).remove(),i.attr("data-name",s),0==$("#subscribed_forum").find(".subscribed").length&&($("#subscribed_forum > div").remove(),$("#subscribed_forum").hide()),sortCategories($(t).find(".subscribed"),t)}function sortCategories(e,t){e.sort(function(e,t){var s=e.getAttribute("data-name"),a=t.getAttribute("data-name");return a<s?1:s<a?-1:0}),e.detach().appendTo(t)}function clickVideo(e){if(-1<(" "+e.className+" ").indexOf(" playing ")){e.className=e.className.replace(/(?:^|\s)playing(?!\S)/g,"");var t=e.getElementsByTagName("video")[0];for(t.setAttribute("src",""),t.pause();t.firstChild;)t.removeChild(t.firstChild)}else{e.className+=" playing";var s=document.createElement("source");s.src=e.getAttribute("data-src"),s.type="video/mp4",e.getElementsByTagName("video")[0].setAttribute("src",e.getAttribute("data-src")),e.getElementsByTagName("video")[0].appendChild(s),e.getElementsByTagName("video")[0].play(),e.hasAttribute("data-threadid")&&(listThreadId.push(e.getAttribute("data-threadid")),e.removeAttribute("data-threadid"),updateView())}}function dataURLtoFile(e,t){for(var s=e.split(","),a=s[0].match(/:(.*?);/)[1],o=atob(s[1]),i=o.length,r=new Uint8Array(i);i--;)r[i]=o.charCodeAt(i);return new File([r],t,{type:a})}function removeAvatar(){$.post("/user/removeprofilepicture/",{userimgrev:$("#userimgrev").val()},function(e){$("#userimgrev").val(e.userimgrev),$("#userimgtime").val(e.userimgtime),$("#jsImageAvatar").attr("src",e.imgurl),$.ajax({url:"/user/update_avatar",type:"post",data:{userimgtime:e.userimgtime,userimgrev:e.userimgrev,imgurl:e.url},success:function(e){e=$.parseJSON(e),$("#jsImageAvatar").attr("src",e.imgurl),$(".jsModal #jsImageAvatar").attr("src",e.imgurl),$(".jsModal #jsPreviewAvatar").attr("src",e.imgurl),$("#loading").html(""),$("#remove_avatar").addClass("D(n)"),closeModal()}})},"json")}function uploadAvatar(){function e(o){if(o.files&&o.files[0]){var i=new FileReader;i.onload=function(e){var t=o.files[0].name.split(".").pop().toLowerCase(),s;if(-1<l.indexOf(t))openModal("jsModalCropAvatar"),$(".cr-viewport").css("border-radius","50%"),setTimeout(function(){r.croppie("bind",{url:e.target.result})},400);else{n=o.files[0];var a=new FormData;a.append("userpicture",n),$.ajax({url:"/user/profilepicture",type:"POST",data:a,processData:!1,contentType:!1,dataType:"json",success:function(e,t){"ok"==e.status?$.ajax({url:"/user/update_avatar",type:"post",data:{userimgtime:e.userimgtime,userimgrev:e.userimgrev,imgurl:e.url},success:function(e){$("#remove_avatar").removeClass("D(n)"),$("#jsImageAvatar").attr("src",i.result),$(".jsModal #jsImageAvatar").attr("src",i.result),$(".jsModal #jsPreviewAvatar").attr("src",i.result),$(document).click()}}):($("#jsModalError #error_message").html(e.error),openModal("jsModalError"))}})}},i.readAsDataURL(o.files[0])}else $("#jsModalError #error_message").html("Sorry - your browser doesn't support the FileReader API"),openModal("jsModalError")}var r,l=["jpg","png","jpeg"],n;r=$("#jsUploadAvatarCropper").croppie({viewport:{width:250,height:250,type:"square"}}),$("#jsUploadAvatar").on("change",function(){e(this)}),$("#jsButtonCropAvatar").on("click",function(e){r.croppie("result",{type:"base64",size:{width:400,height:400},quality:.8,format:"jpeg",backgroundColor:"#e9ebee"}).then(function(e){$("#jsImageAvatar").attr("src",e),$(".jsModal #jsImageAvatar").attr("src",e),$(".jsModal #jsPreviewAvatar").attr("src",e);var t=dataURLtoFile(e,"myavatar.jpg"),s=new FormData;s.append("userpicture",t),$.ajax({url:"/user/profilepicture",type:"POST",data:s,processData:!1,contentType:!1,dataType:"json",success:function(e,t){"ok"==e.status?$.ajax({url:"/user/update_avatar",type:"post",data:{userimgtime:e.userimgtime,userimgrev:e.userimgrev,imgurl:e.url},success:function(e){$("#remove_avatar").removeClass("D(n)"),closeModal()}}):($("#jsModalError #error_message").html(e.error),openModal("jsModalError"))}})})})}function removeCoverImage(){$.post("/user/removecoverimage/",function(e){$.ajax({url:"/user/removecoverimage",type:"post",data:{imgurl:e.old_cover_image_url,action:"delete"},success:function(e){"string"!=e&&(e=$.parseJSON(e)),"ok"==e.status&&($("#jsImageCover").attr("src",assetsFolderNew+"/images/placeholder-cover-image.png"),$("#remove_cover").addClass("D(n)"),closeModal())}})},"json")}function uploadCover(){function e(a){if(a.files&&a.files[0]){var e=new FileReader;e.onload=function(e){var t=a.files[0].name.split(".").pop().toLowerCase(),s;-1<i.indexOf(t)?(openModal("jsModalCropCover"),$(".cr-viewport").css("border-radius",""),setTimeout(function(){o.croppie("bind",{url:e.target.result})},400)):($("#jsModalError #error_message").html("Hanya boleh upload gambar dengan ekstensi <b>.jpg</b>, <b>.png</b>, dan <b>.jpeg</b>"),openModal("jsModalError"))},e.readAsDataURL(a.files[0])}else $("#jsModalError #error_message").html("Sorry - your browser doesn't support the FileReader API"),openModal("jsModalError")}var o,i=["jpg","png","jpeg"],t,s=$("#jsImageCover").attr("src");o=$("#jsUploadCoverCropper").croppie({viewport:{width:685,height:113,type:"square"}}),$("#jsUploadCover").on("change",function(){e(this)}),$("#jsButtonCropCover").on("click",function(e){o.croppie("result",{type:"base64",size:{width:970,height:160},quality:.8,format:"jpeg",backgroundColor:"#e9ebee"}).then(function(e){$("#jsImageCover").attr("src",e),$(".jsModal #jsImageCover").attr("src",e);var t=dataURLtoFile(e,"mycover.jpg"),s=new FormData;s.append("userpicture",t),$.ajax({url:"/user/coverimage",type:"POST",data:s,processData:!1,contentType:!1,dataType:"json",success:function(e){"ok"==e.status?($("#remove_cover").removeClass("D(n)"),closeModal()):($("#jsModalError #error_message").html(e.error),openModal("jsModalError"))}})})})}function getDisplayedState(){return $("#notification_data").attr("data-displayed_state")}function getFetchNotifGif(){return fetching_notif='<img src="'+assetsFolderNew+'/images/icon-load-biru.gif" width="40" height="40" alt="notification-loading" />',html='<div id="load_image" class="Ta(c)">'+fetching_notif+"</div>",html}function getTypeName(e){switch(type_name="",e){case"all":type_name="All (Default)";break;case"reputation":type_name="Cendol";break;case"quoted_post":type_name="Quote";break;case"thread_replies":type_name="Reply";break}return type_name}function hideLoadMoreLink(e,t){var s;"reputation"==$(e+" #type ul li a.Fw\\(700\\)").attr("data-type")&&$(e+" #see_more").addClass("D(n)"),$("#notification_data").attr("data-displayed_state",t);var a=parseInt($("#total_notif").attr("value"));$("#notification_data").attr("data-offset")>=a-30&&($(e+" .load_more").hide(),$(e+" #see_more").addClass("D(n)"))}function getNotifications(t,e){$(t+" #notif_counter_wrapper").removeClass("D(n)"),$(t+" .notificationList").html(getFetchNotifGif()),$("#notification_data").attr("data-offset",0),"quoted_post"==e?($(t+" #notif_counter_wrapper").addClass("D(n)"),$(t+" #filterName").text(getTypeName(e)),$(t+" #type a").removeClass("Fw(700)"),$(t+" #type [data-type=quoted_post]").addClass("Fw(700)"),$(t+" #type").removeClass("is-visible"),url="/myforum/myquotedpost/?offset="+$("#notification_data").attr("data-offset"),getNotificationData(t,url)):"reputation"==e?($(t+" #notif_counter_wrapper").addClass("D(n)"),$(t+" #filterName").text(getTypeName(e)),$(t+" #type a").removeClass("Fw(700)"),$(t+" #type [data-type=reputation]").addClass("Fw(700)"),$(t+" #type").removeClass("is-visible"),url="/notification/reputation",getNotificationData(t,url)):($(t+" .load_more").hide(),type_name=getTypeName(e),displayed_state=getDisplayedState(),url="/notification/show/"+e+"/?ispopup=false&type_name="+type_name+"&displayed_state="+displayed_state,$.get(url,function(e){"object"!=typeof e&&(e=$.parseJSON(e)),$("#notif_wrapper_page").html(e.view.replace(" data-src="," src=")),$(t+" .load_more").show(),hideLoadMoreLink(t,e.new_state)}))}function getNotificationData(a,e){$(a+" .notif_empty").hide(),$(a+" #notif_empty_template").addClass("D(n)");var o=$(a+" #type ul li a.Fw\\(700\\)").attr("data-type"),i="";$(a+" #see_more").hasClass("D(n)")||$(a+" #see_more").addClass("D(n)"),$.get(e,function(e){if("object"!=typeof e&&(e=$.parseJSON(e)),0==e.notifications.length){var t="Agan belum memiliki reputasi nih. Untuk mendapatkan cendol, Agan bisa mulai komen atau buat thread di Kaskus. Jika Kaskuser lain merasa thread Agan menarik, maka Agan bisa mendapatkan cendol atau bata.",s="Agan belum memiliki post yang dibalas nih. Coba deh Agan komen atau buat thread dulu.";"reputation"==o?$(a+" #notif_empty_template span").text(t):"quoted_post"==o&&$(a+" #notif_empty_template span").text(s),$(a+" .notif_empty").hide(),$(a+" #notif_empty_template").removeClass("D(n)")}$.each(e.notifications,function(e,t){template=$(a+" #notificationCardTemplate").html(),template=template.replace(" data-src="," src="),template=template.replace(/{notifType}/g,t.type),t.url.indexOf("?")<0?t.url.indexOf("#")<0?track_url=t.url+"/?ref=notification&med=single_page_"+o:track_url=t.url.replace("#","/?ref=notification&med=single_page_"+o+"#"):t.url.indexOf("#")<0?track_url=t.url+"&ref=notification&med=single_page_"+o:track_url=t.url.replace("#","&ref=notification&med=single_page_"+o+"#"),template=template.replace("{clickUrl}",track_url),template=template.replace("{postBody}",t.additional_data.post_body),template=template.replace("{lastUpdated}",t.last_updated),t.additional_data.post_content?(template=template.replace("{postBodyAlign}","fs"),template=template.replace("{postContent}",'<div class="C(#9e9e9e) Fz(13px) Lh(18px) Wob(breakWord) LineClamp(2,35px)">'+t.additional_data.post_content+"</div>")):(template=template.replace("{postBodyAlign}","c"),template=template.replace("{postContent}","")),t.additional_data.img_src?template=template.replace("{imageSource}",'<div class="Fx(flexZero) Mstart(10px)"><img class="W(60px) H(60px)" src="'+t.additional_data.img_src+'"></div>'):template=template.replace("{imageSource}",""),i+=template}),$(a+" .notificationList").append(i),$(a+" #load_image").remove(),$("#total_notif").attr("value",e.total_notif),$(a+" #see_more").removeClass("D(n)"),hideLoadMoreLink(a,getDisplayedState())})}function seeMore(){var t="#notif_wrapper_page";$(t+" .load_more").hide(),$(t+" #see_more").hasClass("D(n)")||"quoted_post"!=s||$(t+" #see_more").addClass("D(n)"),$(t+" #notification_see_more").append(getFetchNotifGif());var s=$(t+" #type ul li a.Fw\\(700\\)").attr("data-type"),e=parseInt($("#notification_data").attr("data-offset"));if($("#notification_data").attr("data-offset",e+30),"quoted_post"==s)$(t+" .notificationList").append(getFetchNotifGif()),a="/myforum/myquotedpost/?offset="+$("#notification_data").attr("data-offset"),getNotificationData(t,a);else if("reputation"==s)$(t+" .notificationList").append(getFetchNotifGif()),getNotificationData(t,a="/notification/reputation");else{type_name=getTypeName(s),displayed_state=getDisplayedState();var a="/notification/show/"+s+"/?ispopup=false&type_name="+type_name+"&displayed_state="+displayed_state+"&offset="+$("#notification_data").attr("data-offset");$.get(a,function(e){"object"!=typeof e&&(e=$.parseJSON(e)),$(t+" #notification_see_more #load_image").remove(),$(t+" #notification_see_more").append(e.view.replace(" data-src="," src=")),"quoted_post"==s&&$(t+" #see_more").removeClass("D(n)"),$(t+" .load_more").show(),hideLoadMoreLink(t,e.new_state)})}}function add_connection(e,o,i){closeModal();var r=$("#currentid").val(),l=$("#loginid").val(),n=e.substring(e.lastIndexOf("/")+1);$.post(e,{securitytoken:$("#sctoken").val()},function(e){if($("#sctoken").val(e.securitytoken),1==e.result){var t=parseInt($("#following_info").text().replace(/[,\.]/g,"")),s=parseInt($("#follower_info").text().replace(/[,\.]/g,""));if("Unfollow"==e.connection_type)r!=l&&n!=r||($("#unfollow_btn").show(),$("#follow_btn").hide(),$("#unfollow_btn").attr("data-id","unfollow"),r==l&&(count=t+1,$("#following_info").text(count.toLocaleString())),n==r&&(count=s+1,$("#follower_info").text(count.toLocaleString()))),showBottomToast("Agan berhasil mengikuti "+o,1500);else if("Follow"==e.connection_type)r!=l&&n!=r||($("#follow_btn").show(),$("#unfollow_btn").hide(),$("#blocked_btn").hide(),$("#follow_btn").attr("data-id","follow"),e.hasOwnProperty("number_of_following")?(r==l&&(count=t-1,$("#following_info").text(count.toLocaleString())),n==r&&(count=s-1,$("#follower_info").text(count.toLocaleString()))):($("#block_btn").show(),$("#unblock_btn").hide())),e.hasOwnProperty("number_of_following")?showBottomToast("Agan telah berhenti mengikuti "+o,1500):showBottomToast("Agan telah menghapus "+o+" dari ignore list",1500);else if("Unblock"==e.connection_type){if(r==l||n==r){$("#unblock_btn").show(),$("#block_btn").hide(),$("#follow_btn").hide(),$("#unfollow_btn").hide(),$("#blocked_btn").show(),$("#unblock_btn").attr("data-id","unignore");var a=$("#follow_btn").attr("style");void 0!==a&&!1!==a&&(r==l&&(count=t-1,$("#following_info").text(count.toLocaleString())),n==r&&(count=s-1,$("#follower_info").text(count.toLocaleString())))}showBottomToast("Agan berhasil mengabaikan "+o,1500)}}else 0==e.result&&showBottomToast(e.error_message,1500);"following"==i?(setTimeout(function(){openModal("jsModalFollowingList")},1500),load_following_data()):"follower"==i&&(setTimeout(function(){openModal("jsModalFollowersList")},1500),load_follower_data())},"json")}function set_data_unfol_modal(e,t,s,a,o){set_show_modal_confirm(s,t,e,a,o)}function set_data_unblock_modal(e,t,s,a,o){set_show_modal_confirm(s,t,e,a,o)}function set_show_modal_confirm(e,t,s,a,o){$("#confirm-message").html(t),$("#jsImageAvatar").attr("src",s),$(".confirm-action").attr("onclick","add_connection('"+e+"', '"+a+"', '"+o+"')")}function moderate(){$("#jsModalModerateList .data-moderate").empty(),$.get("/profile/get_all_forum_moderate/?user_id="+user_id+"&moderate_page="+moderated_page,function(e){"object"!=typeof e&&(e=$.parseJSON(e)),forum_moderate=e.result.list_forum,forum_icon=e.result.forum_icon;var s="";delete forum_moderate.total_post,$.each(forum_moderate,function(e,t){s+='<div class="D(f) Ai(c) Py(10px)"><div class="Fx(flexZero)"><img src="'+forum_icon[e]+'" class="W(50px) H(50px)" /></div><div class="Fx(flexOne) Ta(s) Mstart(20px)"><a class="Fw(500) C(c-normal))" href="'+t.url+'">'+t.name+"</a></div></div>"}),moderated_page=e.result.next_page,page_remaining=e.result.page_remaining,$("#jsModalModerateList .data-moderate").append(s),0<page_remaining&&$("#jsModalModerateList .data-moderate").append(load_more_forum)})}function load_more_moderated_forum(){$.get("/profile/get_all_forum_moderate/?user_id="+user_id+"&moderate_page="+moderated_page,function(e){"object"!=typeof e&&(e=$.parseJSON(e)),forum_moderate=e.result.list_forum,forum_icon=e.result.forum_icon;var s="";delete forum_moderate.total_post,$.each(forum_moderate,function(e,t){s+='<div class="D(f) Ai(c) Py(10px)"><div class="Fx(flexZero)"><img src="'+forum_icon[e]+'" class="W(50px) H(50px)" /></div><div class="Fx(flexOne) Ta(s) Mstart(20px)"><a class="Fw(500) C(c-normal))" href="'+t.url+'">'+t.name+"</a></div></div>"}),moderated_page=e.result.next_page,page_remaining=e.result.page_remaining,$("#jsModalModerateList .data-moderate").append(s),$("#forum-loadmore").remove(),0<page_remaining&&$("#jsModalModerateList .data-moderate").append(load_more_forum)})}function badge(){badge_page=1,$("#jsModalBadgeList .data-badge").empty(),$.get("/profile/get_all_badges/?user_id="+user_id+"&badge_page="+badge_page,function(e){"object"!=typeof e&&(e=$.parseJSON(e)),list_badge=e.result.badges;var s="";delete list_badge.total_post,$.each(list_badge,function(e,t){s+='<div class="D(f) Ai(c) Py(10px)"><div class="Fx(flexZero)"><img src="'+badge_url+t.badge_id+'.gif" class="W(50px) H(50px)" /></div><div class="Fx(flexOne) Ta(s) Mstart(20px)"><div class="Fw(500) ">'+t.event+'</div><div class="Mt(5px) Fz(11px) C(c-grey)"></div></div></div>'}),badge_page=e.result.next_page,page_remaining=e.result.page_remaining,$("#jsModalBadgeList .data-badge").append(s),0<page_remaining&&$("#jsModalBadgeList .data-badge").append(load_more)})}function load_more_badge(){$.get("/profile/get_all_badges/?user_id="+user_id+"&badge_page="+badge_page,function(e){"object"!=typeof e&&(e=$.parseJSON(e)),list_badge=e.result.badges;var s="";delete list_badge.total_post,$.each(list_badge,function(e,t){s+='<div class="D(f) Ai(c) Py(10px)"><div class="Fx(flexZero)"><img src="'+badge_url+t.badge_id+'.gif" class="W(50px) H(50px)" /></div><div class="Fx(flexOne) Ta(s) Mstart(20px)"><div class="Fw(500) ">'+t.event+'</div><div class="Mt(5px) Fz(11px) C(c-grey)"></div></div></div>'}),badge_page=e.result.next_page,page_remaining=e.result.page_remaining,$("#jsModalBadgeList .data-badge").append(s),$("#badge-loadmore").remove(),0<page_remaining&&$("#jsModalBadgeList .data-badge").append(load_more)})}function scrollContent(e,t){var s="up"===e?"-=5px":"+=5px";$(t).animate({scrollTop:s},1,function(){scrolling&&scrollContent(e,t)})}function toggleOverlay(){"block"!=$(".jsNavHeaderOverlay").css("display")?($(".jsNavHeaderOverlay").show(),$(".jsNavHeaderOverlay").css("top",positionOverlayHeader+"px")):$(".jsNavHeaderOverlay").hide()}function showBottomToast(e,t){$(".jsBottomToast").addClass("is-visible"),$(".jsBottomToast").text(e),setTimeout(function(){$(".jsBottomToast").removeClass("is-visible")},t)}function bindPopoverMenu(){$("body").on("click",".jsPopoverTrigger",function(){var e;$(".jsPopoverTrigger").not(this).next().removeClass("is-visible"),$(this).next().hasClass("is-visible")?$(this).next().removeClass("is-visible"):$(this).next().addClass("is-visible")})}function showReplyTools(){$(".jsReplyTools").show(),$(".jsReplyUser").removeClass("Pos(a)"),$(".jsReplyUser span").show(),$(this).removeClass("Px(40px)")}function openModal(e){$(".jsModal").removeClass("is-open");var t=$("#"+e);t.addClass("is-open"),t.find(".jsModalDialog").addClass("is-animate"),$("body").addClass("Ov(h)")}function closeModal(){$(".jsModal").removeClass("is-open is-animate"),$("body").removeClass("Ov(h)")}
/*
   Function to insert BBCode, it receives 3 parameter. The openWith and closeWith parameters are used to wrap the text with the BBCode tag. The textbox parameter defines which textbox element should be used.
 */function insertBBCode(e,t,s){var a=document.querySelector(s),o=$(s),i=a.selectionStart,r=a.selectionEnd,l=o.val(),n=l.substring(i,r),c=e,d=t;o.val(l.substring(0,i)+c+n+d+l.substring(r)),a.focus(),a.selectionStart=i+c.length+n.length+d.length,a.selectionEnd=i+c.length+n.length+d.length}
// function scrollHeader() {
//     var topHeaderPosition;
//
//     if($('.jsNoticeHeader').length > 0){
//
//         if($(window).scrollTop() <  $('.jsNoticeHeader').outerHeight()){
//             topHeaderPosition = $('.jsNoticeHeader').outerHeight() - $(window).scrollTop();
//         }
//         else{
//             topHeaderPosition = 0;
//         }
//         $('.jsNavHeader').css('top', topHeaderPosition + 'px');
//     }
// }
var positionOverlayHeader;!function(c){c.fn.kslzy=function(l,e){function t(e,t){t=t||"visible";var s=c(e).closest(".spoiler");1==s.length&&(e=s);var a=n.height(),// Viewport Height
o=n.scrollTop(),// Scroll Top
i=c(e).offset().top,r=c(e).height();
//console.log("elm = "+elm+" y = "+y+" scrollTop = "+st+ " elementHeight = "+elementHeight+" Viewport = "+vpH+" threshold ="+threshold);
return"visible"==t?i<a+o+l&&o-r-l<i:"above"==t?i<a+o:void 0}function s(){var e=a.filter(function(){return 0!=c(this).is(":visible")&&t(c(this))});loaded=e.trigger("display"),
// console.log(inview);
a=a.not(loaded)}var n=c(window),a=this,l=l||0;return this.one("display",function(){var e=new Image;if("DIV"==c(this).prop("tagName")||"A"==c(this).prop("tagName")){var t=this;e.onload=function(){if(c(t).removeClass("mls-img").addClass("rjn-img").removeAttr("data-src").hide().fadeIn(),"1"==c(t).attr("data-type"))c(t).css("background-image","url("+this.src+")");else{var e=c('<img class="lte-img">');e.attr("src",this.src),e.appendTo(c(t))}}}else{var s=this;e.onload=function(){c(s).removeClass("mls-img").addClass("rjn-img").removeAttr("data-src"),c(s).attr("src",this.src)}}e.src=c(this).attr("data-src")}),n.on("scroll.kslzy resize.kslzy lookup.kslzy click.kslzy",s),s(),this}}(window.jQuery||window.Zepto),$(window).bind("scroll",function(){
//scrollHeader();
//PositionBackToTop();
$(".jsLeaderboardSkyscrapper").length&&scrollSkyscrapper(),scrollHeaderSticky()});var onTop=!0;$(".flyout__category__list").bind("scroll",function(){checkScroller($(this))}),$(".flyout__subscribed__list").bind("scroll",function(){checkScroller($(this))}),
//scroll top main category search
$(".flyout__result__list").bind("scroll",function(){checkScroller($(this))}),
//scroll anakan main category nav
$(".flyout__category-children__list").bind("scroll",function(){checkScroller($(this))});var linksearch,searchchoice,catLoaded,retryFetch=!0,ten_minutes=600,one_second=1,local_search_history_date,local_search_history,local_top_keyword_date,local_top_keyword,indexSelected=-1,last_process_time=0,last_search_history,last_top_keyword,subscribeUnsubscribeOnProgress=!1,subscribeUnsubscribeEls=[];$(document).ready(function(){var s=!1;$(".get_notifications").click(function(){var e=$("#notification_data").attr("data-displayed_state");if(!s){fetching_notif='<img src="'+assetsFolderNew+'/images/icon-load-biru.gif" width="40" height="40" alt="notification-loading" />',$("#notif_wrapper").html('<div class="Ta(c)">'+fetching_notif+"</div>");var t="/notification/show/all/?ispopup=true&displayed_state="+e;$.get(t,function(e){"object"!=typeof e&&(e=$.parseJSON(e)),$("#notification_see_more"),$("#notif_wrapper").html(e.view),$(".notif_red").hide(),$("#notification_data").attr("data-displayed_state",e.new_state),s=!0})}})}),$("#qr-code-btn").click(function(){$.ajax({url:"/profile/qrcode/"+$(this).data("userid"),success:function(e){var t=e.qrcode;t?$("#img-qrcode").attr("src","data:image/png;base64,"+t):($("#img-qrcode").hide(),$("#div-qr-code").html("Failed to generate QR Code"))}})}),$(document).on({mouseenter:function(){$(this).find("span").text($(this).data("hover")),$(this).find("i").toggleClass("fa-user-lock fa-unlock")},mouseleave:function(){$(this).find("span").text($(this).data("default")),$(this).find("i").toggleClass("fa-user-lock fa-unlock")}},".jsButtonBlockedHeader"),$(document).on({mouseenter:function(){$(this).text($(this).data("hover"))},mouseleave:function(){$(this).text($(this).data("default"))}},".jsFollowingButton, .jsBlockedButton");var moderated_page=1,load_more_forum='<li id="forum-loadmore" class="D(f) Ai(c) Mb(15px)"><a onclick = "load_more_moderated_forum()" href="javascript:void(0)" class="D(b) W(100%) Bgc(#1998ed):h C(#ffffff):h Td(n):h D(b) Py(7px) Px(7px) Fw(500) Ta(c) C(#1998ed) Bd(borderSolidBlue) Bdrs(5px) Mb(10px)">Load More</a></li>',badge_page=1,load_more='<li id="badge-loadmore" class="D(f) Ai(c) Mb(15px)"><a onclick = "load_more_badge()" href="javascript:void(0)" class="D(b) W(100%) Bgc(#1998ed):h C(#ffffff):h Td(n):h D(b) Py(7px) Px(7px) Fw(500) Ta(c) C(#1998ed) Bd(borderSolidBlue) Bdrs(5px) Mb(10px)">Load More</a></li>';// $( ".jsFollowingButton" ).hover(
//   function() {
//     $( this ).text('Unfollow');
//   }, function() {
//     $( this ).text('Following');
//   }
// );
$(".jsButtonFollowingHeader").hover(function(){$(this).find("span").text($(this).data("hover")),$(this).find("i").toggleClass("fa-user-times fa-user-minus")},function(){$(this).find("span").text($(this).data("default")),$(this).find("i").toggleClass("fa-user-times fa-user-minus")}),$(".jsButtonBlockedHeader").hover(function(){$(this).find("span").text($(this).data("hover")),$(this).find("i").toggleClass("fa-user-lock fa-unlock")},function(){$(this).find("span").text($(this).data("default")),$(this).find("i").toggleClass("fa-user-lock fa-unlock")}),$(".jsBlockedButton").hover(function(){$(this).text("Unblock")},function(){$(this).text("Blocked")}),
// $( ".jsUserMenu" )
// 	.mouseover(function() {
//     $(this).find('.jsUserDropdownMenu').toggleClass("is-visible");
//     toggleOverlay();
//   	})
//  	.mouseout(function() {
//     	$(this).find('.jsUserDropdownMenu').toggleClass("is-visible");
//       toggleOverlay();
//   	});
// $( ".jsNotificationMenu" )
// 	.mouseover(function() {
//     $(this).find('.jsNotificationDropdownMenu').toggleClass("is-visible");
//     toggleOverlay();
//   	})
//  	.mouseout(function() {
//     	$(this).find('.jsNotificationDropdownMenu').toggleClass("is-visible");
//       toggleOverlay();
//   	});
// $( ".flyout__trigger" )
// 	.mouseover(function() {
//     	$(".flyout__anchor").show();
//       toggleOverlay();
//
//     	if($('.flyout__tab__pane > .flyout__category__list').length > 0 && $('.flyout__tab__pane > .flyout__category__list')[0].scrollHeight > $('.flyout__tab__pane > .flyout__category__list').height()){
// 	  		$('.flyout__tab__pane > .flyout__category__list').siblings(".flyout__scroll--down").addClass( "flyout__scroll--on" );
// 	  	}
// 	  	if($('.flyout__subscribed__list').length > 0 && $('.flyout__subscribed__list')[0].scrollHeight > $('.flyout__subscribed__list').height()){
// 	  		$('flyout__subscribed__list').siblings(".flyout__scroll--down").addClass( "flyout__scroll--on" );
// 	  	}
//   	})
//  	.mouseout(function() {
//       console.log("wwwwwww");
//     	$(".flyout__anchor").hide();
//       toggleOverlay();
//   	});
$(".flyout__trigger").on("mouseenter",function(){$(".flyout__anchor").show(),toggleOverlay(),0<$(".flyout__tab__pane > .flyout__category__list").length&&$(".flyout__tab__pane > .flyout__category__list")[0].scrollHeight>$(".flyout__tab__pane > .flyout__category__list").height()&&$(".flyout__tab__pane > .flyout__category__list").siblings(".flyout__scroll--down").addClass("flyout__scroll--on"),0<$(".flyout__subscribed__list").length&&$(".flyout__subscribed__list")[0].scrollHeight>$(".flyout__subscribed__list").height()&&$("flyout__subscribed__list").siblings(".flyout__scroll--down").addClass("flyout__scroll--on")}).on("mouseleave",function(){$(".flyout__anchor").hide(),toggleOverlay()}),$(".flyout__content").mouseenter(function(){$(this).closest(".flyout__anchor").show()}).mouseleave(function(){$(this).closest(".flyout__anchor").hide()}),$(".flyout__category__item--has-children , .flyout__category-children__item--has-children").mouseover(function(){$(this).closest(".flyout__content").addClass("flyout__content--triggered"),0<$(this).find(".flyout__category-children__list").first().length&&$(this).find(".flyout__category-children__list").first()[0].scrollHeight>$(this).find(".flyout__category-children__list").first().height()&&$(this).find(".flyout__category-children__list").first().siblings(".flyout__scroll--down").addClass("flyout__scroll--on")}).mouseout(function(){$(this).closest(".flyout__content").removeClass("flyout__content--triggered")}),$(".flyout__subscribed__anchor").mouseover(function(){$(this).closest(".flyout__content").addClass("flyout__content--triggered"),$(this).closest(".flyout__anchor").addClass("flyout__anchor--subscribed"),0<$(this).find(".flyout__subscribed__list").length&&$(this).find(".flyout__subscribed__list")[0].scrollHeight>$(this).find(".flyout__subscribed__list").height()&&$(this).find(".flyout__subscribed__list").siblings(".flyout__scroll--down").addClass("flyout__scroll--on")}).mouseout(function(){$(this).closest(".flyout__content").removeClass("flyout__content--triggered"),$(this).closest(".flyout__anchor").removeClass("flyout__anchor--subscribed")}),$(".flyout__subscribed__panel").mouseover(function(){$(this).siblings(".flyout__subscribed__anchor__link").addClass("flyout__subscribed__anchor__link--hovered")}).mouseout(function(){$(this).siblings(".flyout__subscribed__anchor__link").removeClass("flyout__subscribed__anchor__link--hovered")}),$(".flyout__category__panel").mouseover(function(){$(this).siblings(".flyout__category__link").addClass("flyout__category__link--hovered"),$(this).siblings(".flyout__category-children__link").addClass("flyout__category-children__link--hovered")}).mouseout(function(){$(this).siblings(".flyout__category__link").removeClass("flyout__category__link--hovered"),$(this).siblings(".flyout__category-children__link").removeClass("flyout__category-children__link--hovered")});var scrolling=!1;$(".flyout__scroll--down").bind("mouseover",function(e){scrolling=!0,scrollContent("down",$(this).siblings(".flyout__category-children__list")),scrollContent("down",$(this).siblings(".flyout__category__list")),scrollContent("down",$(this).siblings(".flyout__result__list")),scrollContent("down",$(this).siblings(".flyout__subscribed__list"))}).bind("mouseout",function(e){scrolling=!1}),$(".flyout__scroll--up").bind("mouseover",function(e){scrolling=!0,scrollContent("up",$(this).siblings(".flyout__category-children__list")),scrollContent("up",$(this).siblings(".flyout__category__list")),scrollContent("up",$(this).siblings(".flyout__result__list")),scrollContent("up",$(this).siblings(".flyout__subscribed__list"))}).bind("mouseout",function(e){scrolling=!1}),$(document).ready(function(){function s(){var e=".jsSearchResult .jsSearchWrapper li:eq("+indexSelected+")",t=$(e).find("a").text();$("#search").val(t),$(e).addClass("Bgc(#f2f2f2)"),$("#search").attr("value",t),$("#search").blur(),$("#search").focus()}if("function"==typeof uploadAvatar&&uploadAvatar(),"function"==typeof uploadCover&&uploadCover(),scrollHeaderSticky(),$(".jsNgetopTabButton").click(function(){var e=$(".jsNgetopTabButton").index(this);$(".jsNgetopTabButton").removeClass("is-active"),$(this).addClass("is-active"),$(".jsNgetopTabLine").css("transform","translateX("+$(this).position().left+"px)"),$(".jsNgetopTabContent").css("transform","translateX(-"+100*e+"%)"),$(".jsNgetopTabContent").css("height",$(".jsNgetopTabContent > div:nth-child("+(e+1)+")").height())}),$(".jsTabComponent").length){var e=$(".jsTabButton.is-active"),t=$(".jsTabButton").index($(".jsTabButton.is-active"));$(".jsTabLine").css("width",e.outerWidth()+"px"),$(".jsTabLine").css("transform","translateX("+e.position().left+"px)"),$(".jsTabLine").show(),$(".jsTabComponentContent").css("transform","translateX(-"+100*t+"%)"),$(".jsTabComponentContent").css("height",$(".jsTabComponentContent > div:nth-child("+(t+1)+")").height())}
/*
    Init Clipboard function for Thread Detail Copy Link
   */
var a;if($(".jsTabButton").click(function(){var e=$(".jsTabButton").index(this);$(".jsTabButton").removeClass("is-active"),$(this).addClass("is-active"),$(".jsTabLine").css("width",$(this).outerWidth()+"px"),$(".jsTabLine").css("transform","translateX("+$(this).position().left+"px)"),$(".jsTabComponentContent").css("transform","translateX(-"+100*e+"%)"),$(".jsTabComponentContent").css("height",$(".jsTabComponentContent > div:nth-child("+(e+1)+")").height())}),$(".jsTabNav").click(function(){var e=$(".jsTabNav").index(this);$(this).closest(".jsTabElement").find(".jsTabNav").removeClass("is-active"),$(this).addClass("is-active"),$(this).closest(".jsTabElement").find(".jsTabContent").removeClass("is-show"),$(this).closest(".jsTabElement").find(".jsTabContent").eq(e).addClass("is-show")}),
/*
    bind onclick on link view all badges
   */
$(".all-badges").on("click",function(e){e.preventDefault(),badge()}),
/*
    bind onclick on link view all moderated forum
   */
$(".moderate-di").on("click",function(e){e.preventDefault(),moderate()}),tippy(".jsTippy",{theme:"translucent",arrow:!0,size:"small"}),new ClipboardJS(".jsClipboardButton").on("success",function(e){showBottomToast("URL Copied to Clipboard","2000")}),
/*
    Init Hotkey Function
   */
hotkeys("shift+x, shift+r, shift+left, shift+right",function(e,t){switch(t.key){
// Shift + X to Open Spoiler
case"shift+x":$(".spoiler input[type=button]").click();break;
// Shift + X to Reply Advanced
case"shift+r":link=$(".jsButtonPostReply").attr("href"),link&&(window.location=link);break;
// Shift + Left to Prev Page
case"shift+left":link=$(".pagination .jsPrevPage").attr("href"),link&&(window.location=link);break;
// Shift + Right to Next Page
case"shift+right":link=$(".pagination .jsNextPage").attr("href"),link&&(window.location=link);break}}),$(".jsButtonSmilies").click(function(){$(".jsSmiliesContainer").hasClass("is-visible")?($(".jsSmiliesContainer").removeClass("is-visible"),$(this).removeAttr("style")):($(".jsSmiliesContainer").addClass("is-visible"),$(this).css("color","#1998ed"))}),$(".jsSubscribeThreadIcon").click(function(){subscribeUnsubscribe($(this))}),$("#jsReplyTextArea").focus(function(){showReplyTools()}),autosize($("#jsReplyTextArea")),autosize($(".jsNestedReplyTextArea")),
/*
    Click event toggling
   */
// $('.jsCompactTrigger').click(function(){
//   if(!$('body').hasClass('is-compact')){
//     $('body').addClass('is-compact');
//     $(this).find('i').addClass('fa-list-ul').removeClass('fa-th-large');
//   }
//   else{
//     $('body').removeClass('is-compact');
//     $(this).find('i').addClass('fa-th-large').removeClass('fa-list-ul');
//   }
// });
bindPopoverMenu(),
//scrollHeaderSticky();
$(".is-remove-all").mousedown(function(e){e.preventDefault()}),$(document).on("click",".jsModalTrigger",function(){$(".jsModal").removeClass("is-open");var e=$(this).attr("data-modal"),t=$("#"+e);t.addClass("is-open"),t.find(".jsModalDialog").addClass("is-animate"),$("body").addClass("Ov(h)")}),$(document).on("click",".jsModalCloseButton",function(){closeModal()}),$(".mls-img").kslzy(300),
/*
      Bind Click Button on BUtton channel List
   */
$("body").on("click",".jsChannelForumButton",function(){$(this).closest(".jsChannelForumItem").hasClass("is-open")?($(this).closest(".jsChannelForumItem").removeClass("is-open"),$(this).find("i").removeClass("fa-minus-circle").addClass("fa-plus-circle"),$(this).closest(".jsChannelForumItem").find(".jsChannelForumList").slideUp()):($(this).closest(".jsChannelForumItem").addClass("is-open"),$(this).find("i").removeClass("fa-plus-circle").addClass("fa-minus-circle"),$(this).closest(".jsChannelForumItem").find(".jsChannelForumList").slideDown())}),$(document).on("click",".jsButtonMultiquote",function(){$(this).toggleClass("is-animate is-selected")}),$(document).on("click",".jsPodcastWidgetButtonExpand",function(){$(this).find("i").toggleClass("fa-chevron-down fa-chevron-up"),$(".jsPodcastWidgetEpisodeList").slideToggle()}),0<$(".flyout__trigger").length&&$(".flyout__trigger").hover(function(){catLoaded||fetchCategories()}),""!==linksearch&&get_cat(searchchoice),$("body").on("click",".jsFormPasswordToggle",function(){var e=$(this).closest(".jsFormPassword").find(".jsFormPasswordInput"),t=$(this).closest(".jsFormPassword").find("i");if("text"==e.attr("type"))var s=!1;else var s=!0;s?(t.removeClass("fa-eye-slash"),t.addClass("fa-eye"),e.attr("type","text")):(t.removeClass("fa-eye"),t.addClass("fa-eye-slash"),e.attr("type","password"))}),$(".jsModal").click(function(e){$(e.target).closest(".jsModalContent").length||($(".jsModal").removeClass("is-open"),$("body").removeClass("Ov(h)"))}),$(".jsFirstPostItemTrigger").click(function(){$(".jsFirstPostItemContent").hasClass("is-hide")?($(".jsFirstPostItemContent").removeClass("is-hide"),$(".jsFirstPostItemContent").slideDown(),$(this).find("i").removeClass("fa-angle-down").addClass("fa-angle-up"),$(this).find("span").text("Sembunyikan Isi Thread")):($(".jsFirstPostItemContent").addClass("is-hide"),$(".jsFirstPostItemContent").slideUp(),$(this).find("i").removeClass("fa-angle-up").addClass("fa-angle-down"),$(this).find("span").text("Lihat Isi Thread"),$("html, body").animate({scrollTop:$(".jsFirstPostItemContent").offset().top-300},400))}),$(".jsSpoilerTrigger").click(function(e){$(this).closest(".jsSpoiler").toggleClass("is-open"),$(this).find("i").toggleClass("fa-angle-down fa-angle-up"),$(this).closest(".jsSpoiler").hasClass("is-open")?($(this).find("span").text("Hide"),$(this).closest(".jsSpoiler").find(".jsSpoilerContent").first().slideDown()):($(this).find("span").text("Show"),$(this).closest(".jsSpoiler").find(".jsSpoilerContent").first().slideUp())}),$(".jsTabLink").click(function(){var e=$(this).attr("data-tab");$(".jsTabLink, .jsTabContent").removeClass("is-active"),$(this).addClass("is-active"),$("#"+e).addClass("is-active")}),$(".jsSearchFormInput").focus(function(){$(".jsSearchResult").addClass("is-open"),$(".jsNavHeaderOverlay").show()}),$(".jsSearchFormInput").blur(function(){$(".jsSearchResult").removeClass("is-open"),$(".jsNavHeaderOverlay").hide()}),$(".jsModalCloseButton").click(function(){$(".jsModal").removeClass("is-open"),$("body").removeClass("Ov(h)")}),0<$(".jsPodcastWidget").length){var o=$(".jsPodcastWidget").outerWidth()-45-35-30;$(".jsPodcastWidgetFlex").css("width",o+"px");var i=$(".jsAudioTitle")[0].scrollWidth,r;$(".jsAudioContainer").width()<i&&($(".jsAudioContainer").addClass("is-running"),$(".jsAudioLink").clone().prependTo(".jsAudioTitle"))}$("#search").keydown(function(e){$(".jsSearchResult").find("li").removeClass("Bgc(#f2f2f2)");var t=$(".jsSearchResult .jsSearchWrapper li").length-1;if(38==e.which)return 0<indexSelected?indexSelected--:indexSelected=t,s(),!1;40==e.which&&(indexSelected<t?indexSelected++:indexSelected=0,s())}),$(".jsUserAvatar").click(function(){$(".toggleMenu").hasClass("is-visible")?($(".toggleMenu").removeClass("is-visible"),$(".jsNavHeaderOverlay").hide()):($(this).next().toggleClass("is-visible"),toggleOverlay())}),$(".jsNotificationIcon").click(function(){$(".toggleMenu").hasClass("is-visible")?($(".toggleMenu").removeClass("is-visible"),$(".jsNavHeaderOverlay").hide()):($(this).next().toggleClass("is-visible"),toggleOverlay())}),$(document).on("click",function(e){$(e.target).closest(".jsPopover, .jsUserMenu, .jsNotificationMenu, .jsFlyoutMenu, .jsSearchContainer, .jsReplyTools, #jsReplyTextArea ").length||($(".jsPopoverMenu").removeClass("is-visible"),$(".jsSmiliesContainer").removeClass("is-visible"),$(".jsButtonSmilies").removeAttr("style"),$("#jsReplyTextArea").length&&0==$("#jsReplyTextArea").val().length&&($(".jsReplyTools").hide(),$(".jsReplyUser").addClass("Pos(a)"),$(".jsReplyUser span").hide(),$("#jsReplyTextArea").addClass("Px(40px)")),$(".jsUserDropdownMenu").removeClass("is-visible"),$(".jsNotificationDropdownMenu").removeClass("is-visible"),"block"==$(".jsNavHeaderOverlay").css("display")&&$(".jsNavHeaderOverlay").hide())}),
// $('.jsSidebarLeft').stickySidebar({
//     innerWrapperSelector: '.jsSidebarLeftInner',
//     topSpacing: 100,
//     bottomSpacing: 60
// });
//
// $('.jsSidebarRight').stickySidebar({
//     innerWrapperSelector: '.jsSidebarRightInner',
//     topSpacing: 100,
//     bottomSpacing: 60
// });
// $(".jsStickyColumn").stick_in_parent({
//   parent: ".jsStickyParent",
//   spacer: ".jsStickySpacer",
//   offset_top: 60
// });
// $('.').stickybits();
// stickybits('.jsStickyColumn', {verticalPosition: 'bottom'});
stickybits(".jsStickyAnchor",{stickyBitStickyOffset:60});
//scrollHeader();
// Accordion
var l=$(".jsMenuAccordion");l.children("ul").find("a").click(function(){var e=$(this).next();return e.is("ul")&&e.is(":visible")&&($(this).closest("li").removeClass("is-open"),$(this).find(".jsMenuAccordionIcon").toggleClass("fa-angle-down fa-angle-up"),e.slideUp()),e.is("ul")&&!e.is(":visible")&&(l.children("ul").find("ul:visible").slideUp(),l.find("li").removeClass("is-open"),l.find(".jsMenuAccordionIcon").removeClass("fa-angle-up").addClass("fa-angle-down"),$(this).closest("li").addClass("is-open"),$(this).find(".jsMenuAccordionIcon").toggleClass("fa-angle-down fa-angle-up"),e.slideDown()),0===$(this).closest("li").find("ul").children().length})});