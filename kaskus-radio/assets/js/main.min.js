function sendEventTracking(a,t,e,s,r,i){(r>=minimumDuration||"initial play"==t)&&dataLayer.push({event:"trackEvent","eventDetails.category":a,"eventDetails.action":t,"eventDetails.label":e,"eventDetails.value":r,userID:s,percentageFinished:i,audioTitle:e})}var minimumDuration=5;window.dataLayer=window.dataLayer||[],$(document).ready(function(){function a(){var a=parseInt(n)+1,t=$("[data-number="+a+"]");if(t.attr("data-src")){var s=t.attr("data-src"),r=t.attr("data-type"),o=t.data("stream");u.live=o,c=t.find(".jsPlayTitle").text(),currentDataNumber=t.attr("data-number"),u.stop(),i("stop"),u.load([{type:r,src:s}]),n=currentDataNumber,e(t,!1,!1),i("start")}}function t(){var a=parseInt(n)-1,t=$("[data-number="+a+"]");if(t.attr("data-src")){var s=t.attr("data-src"),r=t.attr("data-type"),o=t.data("stream");u.live=o,c=t.find(".jsPlayTitle").text(),currentDataNumber=t.attr("data-number"),u.stop(),i("stop"),u.load([{type:r,src:s}]),n=currentDataNumber,e(t,!1,!1),i("start")}}function e(a,t,e){$(".jsPlayCircle").removeClass("is-active"),$(a).find(".jsPlayCircle").addClass("is-active"),$(".jsPlayerTitle, .jsPopupTitle").text($(a).data("title")),$(".jsPlayDescription").slideUp(),$(a).next().slideDown(),t?($(".jsPlayTitle").css("color","rgb("+warnaDefault[0]+","+warnaDefault[1]+","+warnaDefault[2]),$(".jsPlayer, .jsProgress").removeClass("is-hide"),$(a).find(".jsPlayTitle").css("color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),$(".jsPopupArea, .jsPopupToolbar, .jsPlayerIndicator").css("background-color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"),$(".jsProgressBar").css("width","0%")):($(".jsPlayTitle").css("color","rgb("+warnaDefault[0]+","+warnaDefault[1]+","+warnaDefault[2]),$(a).find(".jsPlayTitle").css("color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),e?$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"):$(".jsProgressBar").css("width","0%"))}function s(){o=Math.round(u.video.time),l=u.video.time/u.video.duration*100;var t=u.video.time/u.video.duration*100,e=3.6*t,s=r(o);$("[data-number="+n+"]").find(".jsPlayCircle .bar").css("transform","rotate("+e+"deg)"),t>50?$("[data-number="+n+"]").find(".jsPlayCircle").addClass("halfmore"):$("[data-number="+n+"]").find(".jsPlayCircle").removeClass("halfmore"),$(".c-player__progress__scale").find(".jsProgressBar").css("width",t+"%"),$(".jsPlayerIndicator").css("width",t+"%"),$(".c-progress__time--current").html(s),$(".c-progress__time--duration").html(r(Math.round(u.video.duration))),l=Math.round(l),1==u.finished&&a()}function r(a){var t=Math.floor(a/60)||0,e=a-60*t||0;return t+":"+(e<10?"0":"")+e}function i(a){"start"==a&&(d=setInterval(s,100)),"stop"==a&&clearInterval(d)}var n=0,o=0,l=0,c="",d,u=flowplayer("#hidden-player",{live:!1,splash:!0,audioOnly:!0,clip:{sources:[]}}),p=new ColorThief;warnaDominant=p.getColor($(".jsPlayImage")[0]),warnaDefault=[0,0,0],$(".jsPlayHeader").length>0&&$(".jsPlayHeader").css("background-color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),$(".jsPlayButton").click(function(){0==u.playing?($(".jsPlayer, .jsProgress").removeClass("is-hide"),$(".jsPlayButton").toggleClass("is-playing"),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"),u.play(),i("start"),sendEventTracking("radio","play",c,0,o,l)):($(".jsPlayButton").toggleClass("is-playing"),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"),u.pause(),i("stop"),sendEventTracking("radio","pause",c,0,o,l))}),$(".jsPlayLink").click(function(){var a=$(this).attr("data-number");if(0==u.playing){if(a!=n){var t=$(this).attr("data-src"),s=$(this).attr("data-type"),r=$(this).data("stream");u.live=r,c=$(this+".jsPlayTitle").text(),u.load([{type:s,src:t}]),n=a,e(this,!0,!1),sendEventTracking("radio","initial play",c,0,0,0)}else u.play(),e(this,!1,!0),sendEventTracking("radio","play",c,0,o,l);i("start")}else if((a=$(this).attr("data-number"))!=n){u.stop(),i("stop");var t=$(this).attr("data-src"),s=$(this).attr("data-type"),r=$(this).data("stream");u.live=r,c=$(this+".jsPlayTitle").text(),u.load([{type:s,src:t}]),n=a,i("start"),e(this,!1,!1),sendEventTracking("radio","initial play",c,0,0,0)}else u.pause(),i("stop"),sendEventTracking("radio","pause",c,0,o,l),$(".jsPlayTitle").css("color","rgb("+warnaDefault[0]+","+warnaDefault[1]+","+warnaDefault[2]),$(".jsPlayDescription").slideUp(),$(".jsPlayCircle").removeClass("is-active"),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle")}),$(".c-player__progress__scale").click(function(a){var t=$(".c-player__progress__scale").width(),e=a.pageX-this.offsetLeft;e=e/t*100;var s=u.video.duration/100*e;u.seek(s)}),$(".jsSkipForwardButton").click(function(){sendEventTracking("radio","forward 15",c,0,o,l);var a=o+15;a>u.video.duration?u.seek(Math.round(u.video.duration)-1):u.seek(a)}),$(".jsSkipPreviousButton").click(function(){sendEventTracking("radio","backward 15",c,0,o,l);var a=o-15;a<0?u.seek(0):u.seek(a)}),$(".jsPrevButton").click(function(){sendEventTracking("radio","previous track",c,0,o,l),t()}),$(".jsNextButton").click(function(){sendEventTracking("radio","next track",c,0,o,l),a()}),$(".jsPopupArea").css("transform","translateY("+$(window).height()+"px)"),$(".jsPopupShowButton").click(function(){$("body").addClass("o-hidden"),$(".jsPopupArea").toggleClass("is-show"),$(".jsPopupToolbar").show()}),$(".jsPopupCloseButton").click(function(){$("body").removeClass("o-hidden"),$(".jsPopupArea").toggleClass("is-show"),$(".jsPopupToolbar").hide()}),$(window).scroll(function(){$(window).scrollTop()>0?$(".jsNav").addClass("shadow-2"):$(".jsNav").removeClass("shadow-2")})});