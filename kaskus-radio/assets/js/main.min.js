function renderPodcastList(e){var a="../data/"+e+".json";$.getJSON(a,function(e){$(".jsPlayHeader").show(),$(".jsSpinner").hide(),episodes=e.program.episode,colorTheme=e.program.colorTheme,$(".jsPlayImage, .jsPopupImage").attr("src",e.program.imageAlbum),$(".jsPlayHeaderTitle").text(e.program.title),$(".jsPlayAuthor").text(e.program.title),$.each(episodes,function(a,i){$(".jsPlayList").append("<div class='fl w-100 pa2 jsPlayItem'><a class='link black jsPlayLink flex items-center' data-index='"+a+"' data-id='"+e.program.title.replace(/\s/g,"")+"-"+a+"'><div class='fl mr2'><div style='width:65px; height:65px;'><div class='c100 p0 jsPlayCircle'><span class='vagRoundedBold jsPlayCircleSpan'>"+a+"</span><div class='slice'><div class='bar jsPlayCircleBar'></div><div class='fill jsPlayCircleFill'></div></div></div></div></div><div class='flex-auto'><div class='jsPlayTitle f5 line-clamp'>"+i.title+"</div><div class='f6 truncate mt1'><span>"+i.duration+" â–ª "+i.date+"</span></div></div></a><div style='display:none;' class='mt3 jsPlayDescription'>"+i.description+"</div></div>")}),initPodcastList()})}function initPodcastList(){function e(){var e=currentPlayElement.parent().prev();if(e.find(".jsPlayLink").attr("data-id")){sendEventTracking("radio","previous track",audioTitle,0,audioCurrentTime-newStartTime,audioPercentageFinished),t("stop");var a=e.find(".jsPlayLink").attr("data-id"),s=e.find(".jsPlayLink").attr("data-index");dataId=a,audioCurrentTime=0,currentPlayElement=e.find(".jsPlayLink"),episode=episodes[s],audioTitle=episode.title,r.live=episode.stream,r.load([{type:episode.type,src:episode.src}]),i(e.find(".jsPlayLink"),!1,!1),t("start"),sendEventTracking("radio","initial play",audioTitle,0,0,0)}}function a(){var e=currentPlayElement.parent().next();if(e.find(".jsPlayLink").attr("data-id")){sendEventTracking("radio","next track",audioTitle,0,audioCurrentTime-newStartTime,audioPercentageFinished),t("stop");var a=e.find(".jsPlayLink").attr("data-id"),s=e.find(".jsPlayLink").attr("data-index");dataId=a,audioCurrentTime=0,currentPlayElement=e.find(".jsPlayLink"),episode=episodes[s],audioTitle=episode.title,r.live=episode.stream,r.load([{type:episode.type,src:episode.src}]),i(e.find(".jsPlayLink"),!1,!1),t("start"),sendEventTracking("radio","initial play",audioTitle,0,0,0)}}function i(e,a,i){$(".jsPlayCircle").removeClass("is-active"),$(e).find(".jsPlayCircle").addClass("is-active"),$(".jsPlayerTitle, .jsPopupTitle").text(episodes[dataIndex].title),$(".jsPopupDescription").text(episodes[dataIndex].description),$(".jsPlayDescription").slideUp(),$(e).next().slideDown(),a?($(".jsPlayTitle").css("color","rgb("+d[0]+","+d[1]+","+d[2]),$(".jsPlayCircleSpan").removeAttr("style"),$(".jsPopupArea, .jsPopupToolbar, .jsPlayerIndicator").css("background-color","rgb("+n[0]+","+n[1]+","+n[2]),$(e).find(".jsPlayTitle, .jsPlayCircleSpan").css("color","rgb("+n[0]+","+n[1]+","+n[2]),$(e).find(".jsPlayCircleBar, .jsPlayCircleFill").css("border-color","rgb("+n[0]+","+n[1]+","+n[2]),$(".jsPlayer, .jsProgress").removeClass("is-hide"),$(".jsPlayButton").find("i").addClass("fa-pause-circle"),$(".jsPlayButton").find("i").removeClass("fa-play-circle"),$(".jsProgressBar").css("width","0%")):($(".jsPlayTitle").css("color","rgb("+d[0]+","+d[1]+","+d[2]),$(".jsPlayCircleSpan").removeAttr("style"),$(".jsPopupArea, .jsPopupToolbar, .jsPlayerIndicator").css("background-color","rgb("+n[0]+","+n[1]+","+n[2]),$(e).find(".jsPlayTitle, .jsPlayCircleSpan").css("color","rgb("+n[0]+","+n[1]+","+n[2]),$(e).find(".jsPlayCircleBar, .jsPlayCircleFill").css("border-color","rgb("+n[0]+","+n[1]+","+n[2]),i?($(".jsPlayButton").find("i").addClass("fa-pause-circle"),$(".jsPlayButton").find("i").removeClass("fa-play-circle")):($(".jsProgressBar").css("width","0%"),$(".jsPlayCircle .bar").css("transform","rotate(0deg)"),$(".jsPlayCircle").removeClass("halfmore")))}function s(){audioCurrentTime=Math.round(r.video.time),audioPercentageFinished=r.video.time/r.video.duration*100;var e=r.video.time/r.video.duration*100,i=3.6*e,s=formatTime(audioCurrentTime);$("[data-id="+dataId+"]").find(".jsPlayCircle .bar").css("transform","rotate("+i+"deg)"),e>50?$("[data-id="+dataId+"]").find(".jsPlayCircle").addClass("halfmore"):$("[data-id="+dataId+"]").find(".jsPlayCircle").removeClass("halfmore"),$(".c-player__progress__scale").find(".jsProgressBar").css("width",e+"%"),$(".jsPlayerIndicator").css("width",e+"%"),$(".c-progress__time--current").html(s),$(".c-progress__time--duration").html(formatTime(Math.round(r.video.duration))),audioPercentageFinished=Math.round(audioPercentageFinished),1==r.finished&&a()}function t(e){"start"==e&&(timeInterval=setInterval(s,100)),"stop"==e&&clearInterval(timeInterval)}var r=flowplayer("#hidden-player",{live:!1,splash:!0,audioOnly:!0,clip:{sources:[]}}),n=colorTheme,d=[0,0,0];$(".jsPlayHeader").length>0&&$(".jsPlayHeader").css("background-color","rgb("+n[0]+","+n[1]+","+n[2]),$(".jsPlayButton").click(function(){0==r.playing?($(".jsPlayer, .jsProgress").removeClass("is-hide"),$(".jsPlayButton").addClass("is-playing"),$(".jsPlayButton").find("i").addClass("fa-pause-circle"),$(".jsPlayButton").find("i").removeClass("fa-play-circle"),r.play(),t("start"),sendEventTracking("radio","play",audioTitle,0,audioCurrentTime,audioPercentageFinished)):($(".jsPlayButton").removeClass("is-playing"),$(".jsPlayButton").find("i").addClass("fa-play-circle"),$(".jsPlayButton").find("i").removeClass("fa-pause-circle"),r.pause(),t("stop"),sendEventTracking("radio","pause",audioTitle,0,audioCurrentTime,audioPercentageFinished))}),$(".jsPlayLink").click(function(){var e=$(this).attr("data-id"),a=$(this).attr("data-index");if(currentPlayElement=$(this),e!=dataId)dataId=e,dataIndex=a,0==r.playing?i(this,!0,!1):(t("stop"),i(this,!1,!1)),audioCurrentTime=0,episode=episodes[a],audioTitle=episode.title,r.live=episode.stream,r.load([{type:episode.type,src:episode.src}]),sendEventTracking("radio","initial play",audioTitle,0,0,0),t("start");else if(0==r.playing)newStartTime=audioCurrentTime,r.play(),t("start"),i(this,!1,!0),sendEventTracking("radio","play",audioTitle,0,audioCurrentTime,audioPercentageFinished);else{var s=audioCurrentTime-newStartTime;r.pause(),t("stop"),sendEventTracking("radio","pause",audioTitle,0,s,audioPercentageFinished),$(".jsPlayTitle").css("color","rgb("+d[0]+","+d[1]+","+d[2]),$(".jsPlayCircleSpan").removeAttr("style"),$(".jsPlayDescription").slideUp(),$(".jsPlayCircle").removeClass("is-active"),$(".jsPlayButton").find("i").addClass("fa-play-circle"),$(".jsPlayButton").find("i").removeClass("fa-pause-circle")}}),$(".c-player__progress__scale").click(function(e){var a=$(".c-player__progress__scale").width(),i=e.pageX-this.offsetLeft;i=i/a*100;var t=r.video.duration/100*i;r.seek(t,s)}),$(".jsSkipForwardButton").click(function(){sendEventTracking("radio","forward 15",audioTitle,0,audioCurrentTime,audioPercentageFinished);var e=audioCurrentTime+15;e>r.video.duration?r.seek(Math.round(r.video.duration)-1,s):r.seek(e,s)}),$(".jsSkipPreviousButton").click(function(){sendEventTracking("radio","backward 15",audioTitle,0,audioCurrentTime,audioPercentageFinished);var e=audioCurrentTime-15;e<0?r.seek(0,s):r.seek(e,s)}),$(".jsPrevButton").click(function(){e()}),$(".jsNextButton").click(function(){a()}),$(".jsPopupShowButton").click(function(){$("body").addClass("o-hidden"),$(".jsPopupArea").addClass("is-show"),$(".jsPopupToolbar").show()}),$(".jsPopupCloseButton").click(function(){$("body").removeClass("o-hidden"),$(".jsPopupArea").removeClass("is-show"),$(".jsPopupToolbar").hide()}),$(".jsPopupArea").css("transform","translateY("+$(window).height()+"px)")}function sendEventTracking(e,a,i,s,t,r){var n=["pause","next track","previous track","close tab"];if(audioCurrentTime>=minimumDuration||"initial play"==a){var d={event:"trackEvent","eventDetails.category":e,"eventDetails.action":a,"eventDetails.label":i,"eventDetails.value":audioCurrentTime,userID:s};n.includes(a)&&(d.durationPlayed=t,d.audioTitle=i,"pause"!=a&&(d.percentageFinished=r)),dataLayer.push(d)}}function formatTime(e){var a=Math.floor(e/60)||0,i=e-60*a||0;return a+":"+(i<10?"0":"")+i}function getCookie(e){for(var a=e+"=",i=decodeURIComponent(document.cookie),s=i.split(";"),t=0;t<s.length;t++){for(var r=s[t];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(a))return r.substring(a.length,r.length)}return""}var minimumDuration=5,audioCurrentTime=0,audioPercentageFinished=0,audioTitle="",dataId,dataIndex,episodes,colorTheme,currentPlayElement,newStartTime=0,timeInterval;window.dataLayer=window.dataLayer||[],$(document).ready(function(){var e=new Pjax({elements:".jsLink",selectors:[".jsSectionWrapper",".jsNav"],switches:{".jsSectionWrapper":Pjax.switches.sideBySide,".jsSectionWrapper":Pjax.switches.sideBySide},switchesOptions:{".jsSectionWrapper":{classNames:{remove:"Animated Animated--reverse Animate--fast Animate--noDelay",add:"Animated",backward:"Animate--slideInRight",forward:"Animate--slideInLeft"},callbacks:{removeElement:function(e){e.style.marginLeft="-"+e.getBoundingClientRect().width/2+"px"}}}}});topbar.config({barColors:{1:"rgba(239, 170, 66, 1)"},shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"}),$(".jsPopupArea").css("transform","translateY("+$(window).height()+"px)"),document.addEventListener("pjax:send",topbar.show),document.addEventListener("pjax:complete",topbar.hide),$(window).scroll(function(){$(window).scrollTop()>0?$(".jsNav").addClass("shadow-2"):$(".jsNav").removeClass("shadow-2")})}),window.addEventListener("beforeunload",function(e){sendEventTracking("radio","close tab",audioTitle,0,audioCurrentTime-newStartTime,audioPercentageFinished)});