function sendEventTracking(a,e,i,t,r,n){var s=["pause","next track","previous track","close tab"];if(audioCurrentTime>=minimumDuration||"initial play"==e){var o={event:"trackEvent","eventDetails.category":a,"eventDetails.action":e,"eventDetails.label":i,"eventDetails.value":audioCurrentTime,userID:t};s.includes(e)&&(o.durationPlayed=r,o.audioTitle=i,"pause"!=e&&(o.percentageFinished=n)),dataLayer.push(o)}}var minimumDuration=5,audioCurrentTime=0,audioPercentageFinished=0,audioTitle="",dataNumber=0,newStartTime=0,timeInterval;window.dataLayer=window.dataLayer||[],$(document).ready(function(){function a(){var a=parseInt(dataNumber)+1,e=$("[data-number="+a+"]");if(e.attr("data-src")){audioCurrentTime=0;var t=e.attr("data-src"),r=e.attr("data-type"),o=e.data("stream");s.live=o,audioTitle=e.find(".jsPlayTitle").text(),currentDataNumber=e.attr("data-number"),n("stop"),s.load([{type:r,src:t}]),dataNumber=currentDataNumber,i(e,!1,!1),n("start")}}function e(){var a=parseInt(dataNumber)-1,e=$("[data-number="+a+"]");if(e.attr("data-src")){audioCurrentTime=0;var t=e.attr("data-src"),r=e.attr("data-type"),o=e.data("stream");s.live=o,audioTitle=e.find(".jsPlayTitle").text(),currentDataNumber=e.attr("data-number"),n("stop"),s.load([{type:r,src:t}]),dataNumber=currentDataNumber,i(e,!1,!1),n("start")}}function i(a,e,i){$(".jsPlayCircle").removeClass("is-active"),$(a).find(".jsPlayCircle").addClass("is-active"),$(".jsPlayerTitle, .jsPopupTitle").text($(a).data("title")),$(".jsPlayDescription").slideUp(),$(a).next().slideDown(),e?($(".jsPlayTitle").css("color","rgb("+warnaDefault[0]+","+warnaDefault[1]+","+warnaDefault[2]),$(".jsPlayer, .jsProgress").removeClass("is-hide"),$(a).find(".jsPlayTitle").css("color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),$(".jsPopupArea, .jsPopupToolbar, .jsPlayerIndicator").css("background-color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"),$(".jsProgressBar").css("width","0%")):($(".jsPlayTitle").css("color","rgb("+warnaDefault[0]+","+warnaDefault[1]+","+warnaDefault[2]),$(a).find(".jsPlayTitle").css("color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),i?$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"):($(".jsProgressBar").css("width","0%"),$(".jsPlayCircle .bar").css("transform","rotate(0deg)"),$(".jsPlayCircle").removeClass("halfmore")))}function t(){audioCurrentTime=Math.round(s.video.time),audioPercentageFinished=s.video.time/s.video.duration*100;var e=s.video.time/s.video.duration*100,i=3.6*e,t=r(audioCurrentTime);if($("[data-number="+dataNumber+"]").find(".jsPlayCircle .bar").css("transform","rotate("+i+"deg)"),e>50?$("[data-number="+dataNumber+"]").find(".jsPlayCircle").addClass("halfmore"):$("[data-number="+dataNumber+"]").find(".jsPlayCircle").removeClass("halfmore"),$(".c-player__progress__scale").find(".jsProgressBar").css("width",e+"%"),$(".jsPlayerIndicator").css("width",e+"%"),$(".c-progress__time--current").html(t),$(".c-progress__time--duration").html(r(Math.round(s.video.duration))),audioPercentageFinished=Math.round(audioPercentageFinished),1==s.finished){sendEventTracking("radio","next track",audioTitle,0,audioCurrentTime-newStartTime,audioPercentageFinished),a(),sendEventTracking("radio","initial play",audioTitle,0,0,0)}}function r(a){var e=Math.floor(a/60)||0,i=a-60*e||0;return e+":"+(i<10?"0":"")+i}function n(a){"start"==a&&(timeInterval=setInterval(t,100)),"stop"==a&&clearInterval(timeInterval)}$.getJSON("../../data/kaskusnyobain.json",function(a){console.log(a)});var s=flowplayer("#hidden-player",{live:!1,splash:!0,audioOnly:!0,clip:{sources:[]}});if($(".jsPlayImage").length>0){var o=new ColorThief;warnaDominant=o.getColor($(".jsPlayImage")[0]),warnaDefault=[0,0,0]}$(".jsPlayHeader").length>0&&$(".jsPlayHeader").css("background-color","rgb("+warnaDominant[0]+","+warnaDominant[1]+","+warnaDominant[2]),$(".jsPlayButton").click(function(){0==s.playing?($(".jsPlayer, .jsProgress").removeClass("is-hide"),$(".jsPlayButton").toggleClass("is-playing"),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"),s.play(),n("start"),sendEventTracking("radio","play",audioTitle,0,audioCurrentTime,audioPercentageFinished)):($(".jsPlayButton").toggleClass("is-playing"),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle"),s.pause(),n("stop"),sendEventTracking("radio","pause",audioTitle,0,audioCurrentTime,audioPercentageFinished))}),$(".jsPlayLink").click(function(){var a=$(this).attr("data-number");if(a!=dataNumber){0==s.playing?i(this,!0,!1):(n("stop"),i(this,!1,!1)),audioCurrentTime=0;var e=$(this).attr("data-src"),t=$(this).attr("data-type"),r=$(this).data("stream");audioTitle=$(this).find(".jsPlayTitle").text(),s.live=r,s.load([{type:t,src:e}]),dataNumber=a,sendEventTracking("radio","initial play",audioTitle,0,0,0),n("start")}else if(0==s.playing)newStartTime=audioCurrentTime,s.play(),n("start"),i(this,!1,!0),sendEventTracking("radio","play",audioTitle,0,audioCurrentTime,audioPercentageFinished);else{var o=audioCurrentTime-newStartTime;s.pause(),n("stop"),sendEventTracking("radio","pause",audioTitle,0,o,audioPercentageFinished),$(".jsPlayTitle").css("color","rgb("+warnaDefault[0]+","+warnaDefault[1]+","+warnaDefault[2]),$(".jsPlayDescription").slideUp(),$(".jsPlayCircle").removeClass("is-active"),$(".jsPlayButton").find("i").toggleClass("fa-pause-circle fa-play-circle")}}),$(".c-player__progress__scale").click(function(a){var e=$(".c-player__progress__scale").width(),i=a.pageX-this.offsetLeft;i=i/e*100;var r=s.video.duration/100*i;s.seek(r,function(){t()})}),$(".jsSkipForwardButton").click(function(){sendEventTracking("radio","forward 15",audioTitle,0,audioCurrentTime,audioPercentageFinished);var a=audioCurrentTime+15;a>s.video.duration?s.seek(Math.round(s.video.duration)-1,function(){t()}):s.seek(a,function(){t()})}),$(".jsSkipPreviousButton").click(function(){sendEventTracking("radio","backward 15",audioTitle,0,audioCurrentTime,audioPercentageFinished);var a=audioCurrentTime-15;a<0?s.seek(0,function(){t()}):s.seek(a,function(){t()})}),$(".jsPrevButton").click(function(){sendEventTracking("radio","previous track",audioTitle,0,audioCurrentTime-newStartTime,audioPercentageFinished),e(),sendEventTracking("radio","initial play",audioTitle,0,0,0)}),$(".jsNextButton").click(function(){sendEventTracking("radio","next track",audioTitle,0,audioCurrentTime-newStartTime,audioPercentageFinished),a(),sendEventTracking("radio","initial play",audioTitle,0,0,0)}),$(".jsPopupArea").css("transform","translateY("+$(window).height()+"px)"),$(".jsPopupShowButton").click(function(){$("body").addClass("o-hidden"),$(".jsPopupArea").toggleClass("is-show"),$(".jsPopupToolbar").show()}),$(".jsPopupCloseButton").click(function(){$("body").removeClass("o-hidden"),$(".jsPopupArea").toggleClass("is-show"),$(".jsPopupToolbar").hide()}),$(window).scroll(function(){$(window).scrollTop()>0?$(".jsNav").addClass("shadow-2"):$(".jsNav").removeClass("shadow-2")})}),window.addEventListener("beforeunload",function(a){sendEventTracking("radio","close tab",audioTitle,0,audioCurrentTime-newStartTime,audioPercentageFinished)});